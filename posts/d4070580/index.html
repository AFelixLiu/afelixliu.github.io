<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>17、JavaWeb | 红油曲奇的个人博客</title><meta name="author" content="红油曲奇"><meta name="copyright" content="红油曲奇"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="Java 笔记-17">
<meta property="og:type" content="article">
<meta property="og:title" content="17、JavaWeb">
<meta property="og:url" content="https://afelixliu.site/posts/d4070580/index.html">
<meta property="og:site_name" content="红油曲奇的个人博客">
<meta property="og:description" content="Java 笔记-17">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg">
<meta property="article:published_time" content="2024-10-10T07:25:24.000Z">
<meta property="article:modified_time" content="2024-10-15T14:05:00.000Z">
<meta property="article:author" content="红油曲奇">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://afelixliu.site/posts/d4070580/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.9.0"><link rel="stylesheet" href="https://unpkg.com/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://unpkg.com/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://unpkg.com/@fancyapps/ui@5.0.19/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":180},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":60,"languages":{"author":"作者: 红油曲奇","link":"链接: ","source":"来源: 红油曲奇的个人博客","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"rgba(79, 195, 247, 0.6)","bgDark":"rgba(178, 178, 178, 0.5)","position":"top-right"},
  source: {
    justifiedGallery: {
      js: 'https://unpkg.com/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://unpkg.com/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '17、JavaWeb',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-10-15 22:05:00'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const now = new Date()
          const hour = now.getHours()
          const isNight = hour <= 6 || hour >= 18
          if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
          else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css"/><link rel="stylesheet" href="https://unpkg.com/@waline/client@v2/dist/waline.css"><link rel="stylesheet" href="/css/wave.css"><link rel="stylesheet" href="/css/windmill.css"><meta name="generator" content="Hexo 6.3.0"></head><body><script>window.paceOptions = {
  restartOnPushState: false
}

document.addEventListener('pjax:send', () => {
  Pace.restart()
})
</script><link rel="stylesheet" href="/css/pace-minimal.css"/><script src="https://unpkg.com/pace-js@1.2.4/pace.min.js"></script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">27</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="红油曲奇的个人博客"><span class="site-name">红油曲奇的个人博客</span></a></span><div id="tp-weather-widget"></div><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">17、JavaWeb</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-10-10T07:25:24.000Z" title="发表于 2024-10-10 15:25:24">2024-10-10</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-10-15T14:05:00.000Z" title="更新于 2024-10-15 22:05:00">2024-10-15</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Java-%E5%AD%A6%E4%B9%A0/">Java 学习</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">12.9k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>56分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="17、JavaWeb"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/posts/d4070580/#post-comment"><span id="twikoo-count"><i class="fa-solid fa-spinner fa-spin"></i></span></a></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h3 id="1-JavaWeb">1. JavaWeb</h3>
<p>JavaWeb 是一种使用 Java 技术开发的 Web 应用程序，包括服务器端和客户端的 Java 应用。它使用 JSP 或 JSF 等技术来创建动态、交互式的 Web 页面，可以用于开发企业级应用、电子商务平台、社交网络、在线服务等各种 Web 应用。</p>
<p>Java 在<mark>客户端</mark>的应用有 Java Applet，不过使用得很少；Java 在<mark>服务器端</mark>的应用非常的丰富，比如 Servlet，JSP、第三方框架等等。</p>
<h3 id="2-Web-应用程序">2. Web 应用程序</h3>
<p>Web 应用程序是一种可以通过 Web 浏览器访问的应用程序。</p>
<h4 id="2-1-静态-Web">2.1 静态 Web</h4>
<p>当不同的用户或在不同的时间访问静态 Web 网页时，其内容或外观不会改变。</p>
<p>缺点：</p>
<ul>
<li>Web 页面无法动态更新</li>
<li>无法与数据库交互</li>
</ul>
<h4 id="2-2-动态-Web">2.2 动态 Web</h4>
<p>动态 Web 的网页文件中除了 HTML 标记以外，还包括一些特定功能的程序代码，这些代码可以使得浏览器和服务器可以交互，服务器端根据客户的不同请求从而动态生成网页内容。</p>
<h3 id="3-技术名词">3. 技术名词</h3>
<p>架构：B/S 架构、C/S 架构</p>
<p>Web 服务器：IIS 服务器、Tomcat 服务器…</p>
<h3 id="4-Tomcat">4. Tomcat</h3>
<ul>
<li>默认端口号：8080</li>
<li>默认 Web 网站存放位置：<code>webapps</code> 文件夹</li>
</ul>
<p><strong><a target="_blank" rel="noopener" href="https://tomcat.apache.org/whichversion.html"><font color=red>注意事项</font></a></strong></p>
<h3 id="5-HTTP">5. HTTP</h3>
<p>HTTP 默认端口：80</p>
<p>HTTPS 默认端口：443</p>
<p>HTTP 大致发展历程：</p>
<div class="mermaid-wrap"><pre class="mermaid-src" hidden>
  flowchart LR
HTTP&#x2F;1.0 --&gt; HTTP&#x2F;1.1 --&gt; HTTP&#x2F;2.0
  </pre></div>
<h4 id="5-1-HTTP-请求">5.1 HTTP 请求</h4>
<p>‌HTTP 请求方法主要有以下几种：<strong>GET</strong>、<strong>POST</strong>、PUT、DELETE、HEAD、OPTIONS、TRACE 和 CONNECT。这些方法用于不同的网络通信场景，实现了数据的获取、提交、更新和删除等功能。</p>
<p>GET 请求与 POST 请求区别：</p>
<ol>
<li>功能：
<ul>
<li>GET 用于从服务器获取数据。它通过 URL 传递数据，并且数据在 URL 参数中可见。</li>
<li>POST 用于向服务器提交数据。它将数据放在 HTTP 请求的正文中，不会在 URL 中显示。</li>
</ul>
</li>
<li>数据大小：
<ul>
<li>GET 请求的数据大小有限制（通常限制在 1024 字节左右），因为它将数据作为 URL 参数传递。</li>
<li>POST 请求的数据大小通常没有限制，但是由服务器定义。</li>
</ul>
</li>
</ol>
<h4 id="5-2-HTTP-响应">5.2 HTTP 响应</h4>
<p>HTTP 响应状态码用来表明特定 HTTP 请求是否成功完成。 响应被归为以下五大类：</p>
<ol>
<li>信息响应 (<code>100</code>–<code>199</code>)</li>
<li>成功响应 (<code>200</code>–<code>299</code>)
<ul>
<li>200 (请求成功)</li>
</ul>
</li>
<li>重定向消息 (<code>300</code>–<code>399</code>)</li>
<li>客户端错误响应 (<code>400</code>–<code>499</code>)
<ul>
<li>404 (服务器找不到请求的资源)</li>
</ul>
</li>
<li>服务端错误响应 (<code>500</code>–<code>599</code>)</li>
</ol>
<h3 id="6-Maven">6. Maven</h3>
<p>Maven 是一款专门为 Java 项目提供构建和依赖管理支持的工具，可以实现自动化构建、jar 包下载、依赖传递和冲突管理等功能。</p>
<p><strong>基于 Maven 的 JavaWeb 项目结构</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">project-name</span><br><span class="line">├── pom.xml</span><br><span class="line">├── src</span><br><span class="line">│   ├── main</span><br><span class="line">│   │   ├── java</span><br><span class="line">│	│	├── resources</span><br><span class="line">│	│	└── webapp</span><br><span class="line">│   │       ├── WEB-INF</span><br><span class="line">│   │       │   └── web.xml</span><br><span class="line">│   │       └── index.jsp</span><br><span class="line">│   └── test</span><br><span class="line">│       ├── java</span><br><span class="line">│       └── resources</span><br><span class="line">└── target  </span><br></pre></td></tr></table></figure>
<ul>
<li><code>project-name</code> 是项目名</li>
<li><code>pom.xml</code> 是项目描述文件</li>
<li><code>src/main/java</code> 是存放 Java 源码的目录</li>
<li><code>src/main/resources</code> 是存放资源文件的目录</li>
<li><code>src/main/webapp</code> 文件夹是 JavaWeb 项目的主要文件夹，用于存放应用程序。将这个文件夹放入 Tomcat 的 webapps 文件夹中，就能在 Tomcat 启动后访问到对应的 web 项目</li>
<li><code>src/main/webapp/WEB-INF</code> 下的 <code>web.xml</code> 文件是 JavaWeb 项目的配置文件</li>
<li><code>src/main/webapp</code> 下的 <code>index.jsp</code> 文件是 Web 应用的默认页面，后续的网页资源文件都在这里</li>
<li><code>src/test/java</code> 是存放测试源码的目录</li>
<li><code>src/test/resources</code> 是存放测试资源的目录</li>
<li>所有编译、打包生成的文件都放在 <code>target</code> 目录里。</li>
</ul>
<p><font color=orange>注意！</font>应该将 <code>web.xml</code> 文件中的头文件替换为新的版本（4.0），代码如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">     <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">     <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee</span></span></span><br><span class="line"><span class="string"><span class="tag">     http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">     <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span></span></span><br><span class="line"><span class="tag">     <span class="attr">metadata-complete</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">display-name</span>&gt;</span>Archetype Created Web Application<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>推荐操作</strong></p>
<p>构建一个普通的 Maven 项目，删掉里面的 src 目录，后续就在这个项目里面新建 JavaWeb 项目的 Module。这个空的项目工程就是 Maven 主工程，内部的 Module 就是其子工程。</p>
</blockquote>
<h4 id="6-1-配置-Maven">6.1 配置 Maven</h4>
<ul>
<li>
<p>配置环境变量</p>
</li>
<li>
<p>配置镜像</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span>&gt;</span>aliyunmaven<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>*<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>阿里云公共仓库<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://maven.aliyun.com/repository/public<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>配置本地仓库</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- localRepository</span></span><br><span class="line"><span class="comment">| The path to the local repository maven will use to store artifacts.</span></span><br><span class="line"><span class="comment">|</span></span><br><span class="line"><span class="comment">| Default: $&#123;user.home&#125;/.m2/repository</span></span><br><span class="line"><span class="comment">&lt;localRepository&gt;/path/to/local/repo&lt;/localRepository&gt;</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 重新设置 Maven 本地仓库地址 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">localRepository</span>&gt;</span>D:\Maven_Repository<span class="tag">&lt;/<span class="name">localRepository</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>在 IDEA 中配置 Maven</p>
</li>
</ul>
<h4 id="6-2-pom-xml-文件">6.2 <code>pom.xml</code> 文件</h4>
<p><code>pom.xml</code> 文件是 Maven 项目的核心配置文件。</p>
<p>示例：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- GAV配置 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>pers.afelixliu.javaweb<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javaweb-study<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 打包方式：</span></span><br><span class="line"><span class="comment">        jar：Java 应用</span></span><br><span class="line"><span class="comment">        war：JavaWeb 应用</span></span><br><span class="line"><span class="comment">        pom：父工程的打包方式</span></span><br><span class="line"><span class="comment"> 	--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 表示包含的子工程 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modules</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>servlet<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>jsp<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>login-demo<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">modules</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 以下是子工程包含的父工程信息</span></span><br><span class="line"><span class="comment">    	&lt;parent&gt;</span></span><br><span class="line"><span class="comment">        	&lt;groupId&gt;pers.afelixliu.javaweb&lt;/groupId&gt;</span></span><br><span class="line"><span class="comment">        	&lt;artifactId&gt;javaweb-study&lt;/artifactId&gt;</span></span><br><span class="line"><span class="comment">        	&lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;</span></span><br><span class="line"><span class="comment">    	&lt;/parent&gt;</span></span><br><span class="line"><span class="comment">	--&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 配置 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 项目依赖 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet.jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.taglibs<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>taglibs-standard-impl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 由于maven的约定大于配置，可能会遇到其他文件夹中的配置文件无法导出，导致项目无法运行</span></span><br><span class="line"><span class="comment">		解决：只需要在父Maven的pom.xml中添加以下代码（如果导出还是失败则在子pom.xml也添加上）</span></span><br><span class="line"><span class="comment">        &lt;build&gt;</span></span><br><span class="line"><span class="comment">            &lt;resources&gt;</span></span><br><span class="line"><span class="comment">                &lt;resource&gt;</span></span><br><span class="line"><span class="comment">                    &lt;directory&gt;src/main/resources&lt;/directory&gt;</span></span><br><span class="line"><span class="comment">                    &lt;includes&gt;</span></span><br><span class="line"><span class="comment">                        &lt;include&gt;**/*.properties&lt;/include&gt;</span></span><br><span class="line"><span class="comment">                        &lt;include&gt;**/*.xml&lt;/include&gt;</span></span><br><span class="line"><span class="comment">                    &lt;/includes&gt;</span></span><br><span class="line"><span class="comment">                    &lt;filtering&gt;true&lt;/filtering&gt;</span></span><br><span class="line"><span class="comment">                &lt;/resource&gt;</span></span><br><span class="line"><span class="comment">                &lt;resource&gt;</span></span><br><span class="line"><span class="comment">                    &lt;directory&gt;src/main/java&lt;/directory&gt;</span></span><br><span class="line"><span class="comment">                    &lt;includes&gt;</span></span><br><span class="line"><span class="comment">                        &lt;include&gt;**/*.properties&lt;/include&gt;</span></span><br><span class="line"><span class="comment">                        &lt;include&gt;**/*.xml&lt;/include&gt;</span></span><br><span class="line"><span class="comment">                    &lt;/includes&gt;</span></span><br><span class="line"><span class="comment">                    &lt;filtering&gt;true&lt;/filtering&gt;</span></span><br><span class="line"><span class="comment">                &lt;/resource&gt;</span></span><br><span class="line"><span class="comment">            &lt;/resources&gt;</span></span><br><span class="line"><span class="comment">        &lt;/build&gt;</span></span><br><span class="line"><span class="comment">	--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Maven 中央仓库：<a target="_blank" rel="noopener" href="https://mvnrepository.com/">Maven Repository</a></p>
<h3 id="7-Servlet">7. Servlet</h3>
<p>Servlet 是运行在 Web 服务器或应用服务器上的 Java 程序，它可以处理来自浏览器或其他 HTTP 客户端的请求，并生成动态网页。</p>
<p><strong>实现一个简单的 Servlet 程序</strong></p>
<ol>
<li>
<p>编写 Servlet 程序</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.afelixliu.javaweb.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        resp.setContentType(<span class="string">&quot;text/html&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        out.println(<span class="string">&quot;&lt;html&gt;&quot;</span>);</span><br><span class="line">        out.println(<span class="string">&quot;&lt;head&gt;&quot;</span>);</span><br><span class="line">        out.println(<span class="string">&quot;&lt;title&gt;Hello Servlet&lt;/title&gt;&quot;</span>);</span><br><span class="line">        out.println(<span class="string">&quot;&lt;/head&gt;&quot;</span>);</span><br><span class="line">        out.println(<span class="string">&quot;&lt;body&gt;&quot;</span>);</span><br><span class="line">        out.println(<span class="string">&quot;&lt;h1&gt;Hello Servlet&lt;/h1&gt;&quot;</span>);</span><br><span class="line">        out.println(<span class="string">&quot;&lt;/body&gt;&quot;</span>);</span><br><span class="line">        out.println(<span class="string">&quot;&lt;/html&gt;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>实现 Servlet 的注册和映射（在 <code>src/main/webapp/WEB-INF/web.xml</code> 中实现）</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Servlet注册 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>hello_servlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>pers.afelixliu.javaweb.servlet.HelloServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Servlet映射 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>hello_servlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/hello<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="7-1-Servlet-层次结构">7.1 Servlet 层次结构</h4>
<div class="mermaid-wrap"><pre class="mermaid-src" hidden>
  classDiagram
  direction TB
  class Servlet {
    &lt;&lt;interface&gt;&gt;
    noOfVertices
    void service(...)
    ...(...)
  }
  
  class GenericServlet {
  	&lt;&lt;abstract&gt;&gt;
  	...
  	abstract void service(...)
  	...(...)
  }
  
  class HttpServlet {
  	&lt;&lt;abstract&gt;&gt;
  	...
  	void doGet(...)
  	void doPost(...)
  	void service(...)
  	...(...)
  }
  
  class CustomServlet {
  	void doGet(...)
  	void doPost(...)
  	...(...)
  }

Servlet &lt;|.. GenericServlet
GenericServlet &lt;|-- HttpServlet
HttpServlet &lt;|-- CustomServlet
  </pre></div>
<h4 id="7-2-补充：Servlet-容器、Web-容器">7.2 补充：Servlet 容器、Web 容器</h4>
<p><strong>Servlet 容器</strong>就是用来管理和加载 Servlet 类的，根据 HTTP 请求找到对应的 Servlet 类，这就是 Servlet 容器要做的事情。</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/d4070580/Servlet%E5%AE%B9%E5%99%A8.webp" class="">
<p><strong>Web 容器</strong>其实就是 HTTP 服务器 + Servlet 容器，因为单单 Servlet 容器没有解析 HTTP 请求、通信等相关功能。所以把 Tomcat、Jetty 等实现包含了 HTTP 服务器和 Servlet 容器的功能，称之为 Web 容器。</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/d4070580/Web%E5%AE%B9%E5%99%A8.webp" class="">
<blockquote>
<p>参考来源：[为什么要有 Servlet ，什么是 Servlet 容器，什么是 Web 容器？](<a target="_blank" rel="noopener" href="https://www.cnblogs.com/yescode/p/14099868.html#:~:text=%E5%85%B6%E5%AE%9E%E6%8C%87%E4%BB%A3%E7%9A%84%E6%98%AF%E5%AE%9E%E7%8E%B0">https://www.cnblogs.com/yescode/p/14099868.html#:~:text=其实指代的是实现</a> S)</p>
</blockquote>
<h4 id="7-3-Servlet-生命周期">7.3 Servlet 生命周期</h4>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/d4070580/Servlet%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.png" class="">
<p>Servlet 的生命周期共分为 4 大过程：</p>
<ol>
<li>
<p>实例化 —— 先创建 Servlet 实例</p>
<blockquote>
<p>启动 Servlet 容器，它会查找并加载部署的 Servlet 类。一旦Servlet类加载完成，Servlet 容器会创建 Servlet 的实例，这是通过调用Servlet的无参数构造函数来完成的。</p>
<p><strong>注意</strong>：每个 Servlet 只会有一个实例，所有请求都共享这个实例。</p>
</blockquote>
</li>
<li>
<p>初始化 —— <code>init()</code></p>
<blockquote>
<p>在 Servlet 实例创建后，容器会调用 Servlet 的 <code>init()</code> 方法初始化 Servlet 的信息，<code>init()</code> 方法简单地创建或加载一些数据，这些数据将被用于 Servlet 的整个生命周期。</p>
<ul>
<li>
<p><code>init()</code> 方法是初始化阶段的入口点，可以在这里进行一些初始化工作，如读取配置文件、建立数据库连接等。</p>
</li>
<li>
<p><mark><code>init()</code> 方法只会在 Servlet 对象创建后被调用一次，在 Servlet 实例创建后立即执行，在后续每次用户请求时不再调用</mark>。</p>
</li>
</ul>
</blockquote>
</li>
<li>
<p>处理请求 —— <code>service()</code></p>
<blockquote>
<p>初始化完成后调取 <code>service()</code> 方法，由 <code>service()</code> 判断客户端的请求方式：</p>
<ul>
<li>如果是 get 请求，则执行 <code>doGet()</code> 方法</li>
<li>如果是 post 请求，则执行 <code>doPost()</code> 方法</li>
<li>处理方法完成后会作出相应的结果返回给客户端，单次请求处理完毕。</li>
</ul>
<p>当用户发送第二次以后的请求时，会判断对象是否存在，但是不再执行 <code>init()</code>，而直接执行 <code>service()</code> 方法调取 <code>doGet()</code> / <code>doPost()</code> 方法。</p>
<p><font color=red>每次服务器接收到一个 Servlet 请求时，服务器会产生一个新的线程并调用服务。</font></p>
</blockquote>
</li>
<li>
<p>服务终止 —— <code>destroy()</code></p>
<blockquote>
<p>在长时间没有被调用或者是服务器关闭时，会调用 <code>destroy()</code> 方法来销毁 Servlet 对象。</p>
<ol>
<li><mark><code>destroy()</code> 方法只会被调用一次，在 Servlet 生命周期结束时被调用</mark>。</li>
<li><code>destroy()</code> 方法可以让 Servlet 关闭数据库连接、停止后台线程、把 Cookie 列表或点击计数器写入到磁盘，并执行其他类似的清理活动。</li>
<li>在调用 <code>destroy()</code> 方法之后，<mark>Servlet 对象被标记为垃圾回收</mark>。</li>
</ol>
</blockquote>
</li>
</ol>
<p><font color=orange>每个 Servlet 在容器中是单实例的，所有请求都共享这个实例。因此，Servlet 的方法需要是线程安全的。</font></p>
<h4 id="7-4-ServletContext">7.4 ServletContext</h4>
<p>ServletContext 是 Servlet 容器提供的一个对象，用于在整个 Web 应用程序中共享信息和资源。它是一个接口，位于 <code>javax.servlet</code> 包中，定义了一组方法，允许开发人员与 Web 应用程序的上下文进行交互。<font color=blue>每个 Web 应用程序都有一个对应的 ServletContext 对象，并且是唯一的，整个 Web 应用程序都可以访问它。</font></p>
<p>具体来说，ServletContext 允许开发人员在 Web 应用程序范围内存储数据和资源，并可以被所有 Servlet 和 JSP 页面访问。这意味着开发者可以在不同的 Servlet 之间共享数据，而不仅仅是在同一个 Servlet 内。</p>
<p><strong>获取 ServletContext 的方式</strong></p>
<ol>
<li>
<p>先用 <code>this.getServletConfig()</code> 方法获取到 ServletConfig 对象，然后再用 <code>ServletConfig</code> 对象的 <code>getServletContext()</code> 方法获得 <code>ServletContext</code> 对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletConfig().getServletContext();</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>直接获取（<strong>推荐</strong>）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ServletContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletContext();</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><strong>ServletContext 常见作用</strong></p>
<ol>
<li>
<p>共享数据，代码示例如下</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.afelixliu.javaweb.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContext;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 保存数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SetContext</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> <span class="string">&quot;afelixliu&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletContext();</span><br><span class="line">        context.setAttribute(<span class="string">&quot;user&quot;</span>, user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.afelixliu.javaweb.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContext;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GetContext</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> &#123;</span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletContext();</span><br><span class="line">        System.out.println(context.getAttribute(<span class="string">&quot;user&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>获取当前的工程名/模块名，代码示例如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.afelixliu.javaweb.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GetContextPath</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">contextPath</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletContext().getContextPath();</span><br><span class="line">        System.out.println(contextPath);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>获取web.xml中配置的初始化参数context-param，代码示例如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;context-param&gt;</span><br><span class="line">    &lt;param-name&gt;name&lt;/param-name&gt;</span><br><span class="line">    &lt;param-value&gt;afelixliu&lt;/param-value&gt;</span><br><span class="line">&lt;/context-param&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.afelixliu.javaweb.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContext;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GetContextParam</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletContext();</span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> context.getInitParameter(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;param name is &quot;</span> + name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">super</span>.doPost(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>读取资源文件，代码示例如下：</p>
<p>第一步、在 <code>src/main/resources</code> 目录（<font color=red>必须在该目录</font>）下新建 <code>user.properties</code> 文件</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">username</span>=<span class="string">afelixliu</span></span><br><span class="line"><span class="attr">age</span>=<span class="string">18</span></span><br></pre></td></tr></table></figure>
<p>第二步、读取文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">package pers.afelixliu.javaweb.servlet;</span><br><span class="line"></span><br><span class="line">import javax.servlet.ServletException;</span><br><span class="line">import javax.servlet.http.HttpServlet;</span><br><span class="line">import javax.servlet.http.HttpServletRequest;</span><br><span class="line">import javax.servlet.http.HttpServletResponse;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.InputStream;</span><br><span class="line">import java.util.Properties;</span><br><span class="line"></span><br><span class="line">public class GetResource extends HttpServlet &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException &#123;</span><br><span class="line">        /*</span><br><span class="line">         * &quot;/WEB-INF/classes/user.properties&quot; 为target文件夹下工程名/模块名中对应文件的路径</span><br><span class="line">         * 第一个“/”表示工程名/模块名</span><br><span class="line">         */</span><br><span class="line">        try (InputStream is = this.getServletContext().getResourceAsStream(&quot;/WEB-INF/classes/user.properties&quot;)) &#123;</span><br><span class="line">            Properties prop = new Properties();</span><br><span class="line">            prop.load(is);</span><br><span class="line">            String name = prop.getProperty(&quot;username&quot;);</span><br><span class="line">            int age = Integer.parseInt(prop.getProperty(&quot;age&quot;));</span><br><span class="line">            System.out.println(name + &quot; &quot; + age);</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            throw new RuntimeException(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException &#123;</span><br><span class="line">        super.doPost(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>请求转发，代码示例如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.afelixliu.javaweb.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContext;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestDispatcherDemo</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletContext();</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * &quot;/hello&quot; 为转发的目标地址，可以是Servlet映射地址，也可以是一个jsp页面...</span></span><br><span class="line"><span class="comment">         * 可以使用相对路径，也可以使用绝对路径</span></span><br><span class="line"><span class="comment">         * 第一个“/”表示工程名/模块名</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        context.getRequestDispatcher(<span class="string">&quot;/hello&quot;</span>).forward(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>…</p>
</li>
</ol>
<h4 id="7-5-HttpServletResponse">7.5 HttpServletResponse</h4>
<p>HttpServletResponse 对象代表服务器的响应。这个对象中封装了向客户端<strong>发送数据</strong>、<strong>发送响应头</strong>和<strong>发送响应状态码</strong>的方法。</p>
<p>HttpServletResponse 是 ServletResponse 的子接口。</p>
<p>（一）向客户端<strong>发送数据</strong>的相关方法</p>
<ul>
<li>
<p><code>ServletOutputStream getOutputStream() throws IOException;</code></p>
</li>
<li>
<p><code>PrintWriter getWriter() throws IOException;</code></p>
</li>
</ul>
<p>（二）向客户端<strong>发送响应头</strong>的相关方法</p>
<ul>
<li><code>void addDateHeader(String var1, long var2)</code></li>
<li><code>void setDateHeader(String var1, long var2)</code></li>
<li><code>void addHeader(String var1, String var2)</code></li>
<li><code>void setHeader(String var1, String var2)</code></li>
<li><code>void addIntHeader(String var1, int var2)</code></li>
<li><code>void setIntHeader(String var1, int var2)</code></li>
</ul>
<p>（三）向客户端<strong>发送响应状态码</strong>的相关方法</p>
<ul>
<li>
<p><code>void setStatus(int var1)</code></p>
<p>响应状态码（位于 <code>HttpServletResponse</code> 接口）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">SC_CONTINUE</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">SC_SWITCHING_PROTOCOLS</span> <span class="operator">=</span> <span class="number">101</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">SC_OK</span> <span class="operator">=</span> <span class="number">200</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">SC_CREATED</span> <span class="operator">=</span> <span class="number">201</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">SC_ACCEPTED</span> <span class="operator">=</span> <span class="number">202</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">SC_NON_AUTHORITATIVE_INFORMATION</span> <span class="operator">=</span> <span class="number">203</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">SC_NO_CONTENT</span> <span class="operator">=</span> <span class="number">204</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">SC_RESET_CONTENT</span> <span class="operator">=</span> <span class="number">205</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">SC_PARTIAL_CONTENT</span> <span class="operator">=</span> <span class="number">206</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">SC_MULTIPLE_CHOICES</span> <span class="operator">=</span> <span class="number">300</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">SC_MOVED_PERMANENTLY</span> <span class="operator">=</span> <span class="number">301</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">SC_MOVED_TEMPORARILY</span> <span class="operator">=</span> <span class="number">302</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">SC_FOUND</span> <span class="operator">=</span> <span class="number">302</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">SC_SEE_OTHER</span> <span class="operator">=</span> <span class="number">303</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">SC_NOT_MODIFIED</span> <span class="operator">=</span> <span class="number">304</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">SC_USE_PROXY</span> <span class="operator">=</span> <span class="number">305</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">SC_TEMPORARY_REDIRECT</span> <span class="operator">=</span> <span class="number">307</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">SC_BAD_REQUEST</span> <span class="operator">=</span> <span class="number">400</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">SC_UNAUTHORIZED</span> <span class="operator">=</span> <span class="number">401</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">SC_PAYMENT_REQUIRED</span> <span class="operator">=</span> <span class="number">402</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">SC_FORBIDDEN</span> <span class="operator">=</span> <span class="number">403</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">SC_NOT_FOUND</span> <span class="operator">=</span> <span class="number">404</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">SC_METHOD_NOT_ALLOWED</span> <span class="operator">=</span> <span class="number">405</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">SC_NOT_ACCEPTABLE</span> <span class="operator">=</span> <span class="number">406</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">SC_PROXY_AUTHENTICATION_REQUIRED</span> <span class="operator">=</span> <span class="number">407</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">SC_REQUEST_TIMEOUT</span> <span class="operator">=</span> <span class="number">408</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">SC_CONFLICT</span> <span class="operator">=</span> <span class="number">409</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">SC_GONE</span> <span class="operator">=</span> <span class="number">410</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">SC_LENGTH_REQUIRED</span> <span class="operator">=</span> <span class="number">411</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">SC_PRECONDITION_FAILED</span> <span class="operator">=</span> <span class="number">412</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">SC_REQUEST_ENTITY_TOO_LARGE</span> <span class="operator">=</span> <span class="number">413</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">SC_REQUEST_URI_TOO_LONG</span> <span class="operator">=</span> <span class="number">414</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">SC_UNSUPPORTED_MEDIA_TYPE</span> <span class="operator">=</span> <span class="number">415</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">SC_REQUESTED_RANGE_NOT_SATISFIABLE</span> <span class="operator">=</span> <span class="number">416</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">SC_EXPECTATION_FAILED</span> <span class="operator">=</span> <span class="number">417</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">SC_INTERNAL_SERVER_ERROR</span> <span class="operator">=</span> <span class="number">500</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">SC_NOT_IMPLEMENTED</span> <span class="operator">=</span> <span class="number">501</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">SC_BAD_GATEWAY</span> <span class="operator">=</span> <span class="number">502</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">SC_SERVICE_UNAVAILABLE</span> <span class="operator">=</span> <span class="number">503</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">SC_GATEWAY_TIMEOUT</span> <span class="operator">=</span> <span class="number">504</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">SC_HTTP_VERSION_NOT_SUPPORTED</span> <span class="operator">=</span> <span class="number">505</span>;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>使用场景</strong></p>
<ol>
<li>
<p><strong>文件下载：</strong> 通过设置响应头部，可以将文件下载链接提供给客户端，实现文件下载功能。代码示例如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.afelixliu.javaweb.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.net.URLEncoder;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// 1.获取文件信息</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">filePath</span> <span class="operator">=</span> <span class="string">&quot;D:\\IdeaProjects\\javaweb-study\\servlet\\src\\main\\resources\\MVDP.jpg&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> filePath.substring(filePath.lastIndexOf(<span class="string">&quot;\\&quot;</span>) + <span class="number">1</span>);</span><br><span class="line">        <span class="comment">// 2.设置响应头（中文文件名使用URLEncoder.encode编码，否则有可能乱码）</span></span><br><span class="line">        resp.setHeader(<span class="string">&quot;Content-Disposition&quot;</span>, <span class="string">&quot;attachment; filename=&quot;</span> + URLEncoder.encode(fileName, <span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 3.获取文件输入流</span></span><br><span class="line">            <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(filePath);</span><br><span class="line">            <span class="comment">// 4.缓冲区</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">            <span class="comment">// 5.获取文件输出流，下载文件</span></span><br><span class="line">            <span class="keyword">while</span> ((len = fis.read(buffer)) != -<span class="number">1</span>) &#123;</span><br><span class="line">                resp.getOutputStream().write(buffer, <span class="number">0</span>, len);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 6.关闭流</span></span><br><span class="line">            fis.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>动态内容生成：</strong> 使用 <code>HttpServletResponse</code> 可以在服务器端生成动态的 HTML、JSON 等响应内容。代码示例如下（随机验证码）：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.afelixliu.javaweb.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.awt.*;</span><br><span class="line"><span class="keyword">import</span> java.awt.image.BufferedImage;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"><span class="keyword">import</span> javax.imageio.ImageIO;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ImageServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">        resp.setContentType(<span class="string">&quot;image/jpeg&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 浏览器自动刷新</span></span><br><span class="line">        resp.setIntHeader(<span class="string">&quot;Refresh&quot;</span>, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 禁用浏览器缓存</span></span><br><span class="line">        resp.setDateHeader(<span class="string">&quot;Expires&quot;</span>, -<span class="number">1</span>);</span><br><span class="line">        resp.setHeader(<span class="string">&quot;Cache-Control&quot;</span>, <span class="string">&quot;no-cache&quot;</span>);</span><br><span class="line">        resp.setHeader(<span class="string">&quot;Pragma&quot;</span>, <span class="string">&quot;no-cache&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 内存中创建一个图片</span></span><br><span class="line">        <span class="type">BufferedImage</span> <span class="variable">image</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedImage</span>(<span class="number">180</span>, <span class="number">90</span>, BufferedImage.TYPE_INT_RGB);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置画笔</span></span><br><span class="line">        <span class="type">Graphics</span> <span class="variable">g</span> <span class="operator">=</span> image.getGraphics();</span><br><span class="line">        g.setColor(Color.white);</span><br><span class="line">        g.setFont(<span class="keyword">new</span> <span class="title class_">Font</span>(<span class="string">&quot;Times New Roman&quot;</span>, Font.PLAIN, <span class="number">60</span>));</span><br><span class="line">        g.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">180</span>, <span class="number">90</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 绘制图片</span></span><br><span class="line">        g.setColor(Color.black);</span><br><span class="line">        g.drawString(getRand(), <span class="number">30</span>, <span class="number">66</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 将图片响应给浏览器</span></span><br><span class="line">        ImageIO.write(image, <span class="string">&quot;jpeg&quot;</span>, resp.getOutputStream());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getRand</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Random</span> <span class="variable">random</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">        <span class="type">String</span> <span class="variable">num</span> <span class="operator">=</span> random.nextInt(<span class="number">9999</span>) + <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">complete</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">4</span> - num.length(); i++) &#123;</span><br><span class="line">            complete.append(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        num += complete.toString();</span><br><span class="line">        <span class="keyword">return</span> num;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>错误处理：</strong> 在发生错误时可以使用 <code>HttpServletResponse</code> 发送合适的错误响应给客户端。</p>
</li>
<li>
<p><strong>重定向</strong>，代码示例如下（登录跳转）：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.afelixliu.javaweb.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginAuthServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">super</span>.doGet(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;admin&quot;</span>.equals(req.getParameter(<span class="string">&quot;name&quot;</span>)) &amp;&amp; <span class="string">&quot;123&quot;</span>.equals(req.getParameter(<span class="string">&quot;password&quot;</span>))) &#123;</span><br><span class="line">            resp.sendRedirect(req.getServletContext().getContextPath() + <span class="string">&quot;/login-success.jsp&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            resp.sendRedirect(<span class="string">&quot;index.jsp&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><strong>请求转发与重定向的异同：</strong></p>
<ul>
<li>两者都可以实现页面的跳转；</li>
<li><strong>请求转发</strong>是服务器内部转发，浏览器只发出一次请求；<strong>重定向</strong>是浏览器发出了两次请求，第一次请求得到一个地址，根据得到的地址发出第二次请求才得到内容。</li>
<li><strong>请求转发</strong>时浏览器上的地址不会改变；<strong>重定向</strong>时浏览器上的地址会改变。</li>
<li><strong>请求转发</strong>的效率更高，<strong>重定向</strong>的效率低。</li>
<li><strong>请求转发</strong>可以使用 request 对象在多个页面间传递参数；<strong>重定向</strong>不可以。</li>
<li><strong>请求转发</strong>可能造成表单的重复提交；<strong>重定向</strong>不会，在表单处理时经常使用重定向解决表单重复提交问题。</li>
<li><strong>请求转发</strong>只能在服务器内部转发；<strong>重定向</strong>可以跳转到其他服务器进行转发。</li>
</ul>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/d4070580/Forward_Redirect.webp" class="">
<h4 id="7-6-HttpServletRequest">7.6 HttpServletRequest</h4>
<p>HttpServletRequest 对象代表客户端的请求，当客户端通过 HTTP 协议访问服务器时，HTTP 请求头中的所有信息都封装在这个对象中，通过这个对象提供的方法，可以获得客户端请求的所有信息。</p>
<p>HttpServletReques 是 ServletRequest 的子接口。</p>
<p>HTTP 请求消息分为<strong>请求行</strong>、<strong>请求消息头</strong>和<strong>请求消息体</strong>三部分，所以 HttpServletRequest 接口中定义了获取请求行、请求头和请求消息体的相关方法。</p>
<p>（一）获取<strong>请求行</strong>信息</p>
<p>HTTP 请求的请求行中包含请求方法、请求资源名、请求路径等信息。</p>
<ul>
<li><code>getMethod()</code> - 获取 HTTP 请求方式</li>
<li><code>getRequestURI()</code> - 获取请求行中的资源名称部分</li>
<li><code>getQueryString()</code> - 获取请求行中的参数部分</li>
<li><code>getContextPath()</code> - 返回当前 Servlet 所在的应用的名字（上下文）。对于默认（ROOT）上下文中的 Servlet，此方法返回空字符串&quot;&quot;</li>
<li><code>getServletPath()</code> - 获取 Servlet 所映射的路径</li>
<li><code>getRemoteAddr()</code> - 获取客户端的 IP 地址</li>
<li><code>getRemoteHost()</code> - 获取客户端的完整主机名，如果无法解析出客户机的完整主机名，则该方法将会返回客户端的 IP 地址</li>
<li>…</li>
</ul>
<p>（二）获取<strong>请求消息头</strong>信息</p>
<p>当浏览器发送请求时，需要通过请求头向服务器传递一些附加信息，例如客户端可以接收的数据类型、压缩方式、语言等。</p>
<ul>
<li><code>getHeader(String name)</code> - 获取一个指定头字段的值，如果请求消息中包含多个指定名称的头字段，则该方法返回其中第一个头字段的值</li>
<li><code>getHeaders(String name)</code> -返回指定头字段的所有值的枚举集合，在多数情况下，一个头字段名在请求消息中只出现一次，但有时可能会出现多次</li>
<li><code>getHeaderNames()</code> - 返回请求头中所有头字段的枚举集合</li>
<li><code>getContentType()</code> - 获取 Content-Type 头字段的值</li>
<li><code>getContentLength()</code> - 获取 Content-Length 头字段的值</li>
<li><code>getCharacterEncoding()</code> - 返回请求消息的字符集编码</li>
<li>…</li>
</ul>
<p>（三）获取<strong>请求消息体</strong>信息</p>
<ul>
<li><code>getParameter(String name)</code> - 返回指定参数名的参数值</li>
<li><code>getParameterNames()</code> - 以枚举集合的形式返回请求中所有参数名</li>
<li><code>getParameterValues (String name)</code> - 以字符串数组的形式返回指定参数名的所有参数值（HTTP 请求中可以有多个相同参数名的参数）</li>
<li><code>getParameterMap()</code> - 将请求中的所有参数名和参数值装入一个 Map 对象中返回</li>
<li>…</li>
</ul>
<h3 id="8-Cookie-与-Session">8. Cookie 与 Session</h3>
<p>由于 Http 是一种无状态的协议，服务器单从网络连接上无从知道客户身份。</p>
<p>会话跟踪是 Web 程序中常用的技术，用来跟踪用户的整个会话。常用会话跟踪技术是 <strong>Cookie</strong> 与 <strong>Session</strong>。</p>
<p><strong>Cookie 和 Session 主要区别：</strong></p>
<ul>
<li><strong>存储位置</strong>：Cookie 存储在客户端浏览器上，而 Session 存储在服务器端。</li>
<li><strong>安全性</strong>：由于 Cookie 存储在客户端，因此容易受到攻击（如跨站脚本攻击 XSS），而 Session 存储在服务器端，相对更安全。</li>
<li><strong>容量限制</strong>：Cookie 的大小有限制（通常为 4KB），而 Session 的大小限制取决于服务器的内存。</li>
</ul>
<h4 id="8-1-Cookie">8.1 Cookie</h4>
<p>Cookie 是一种<mark>客户端存储</mark>技术，它将少量数据存储在用户的浏览器上，以便后续请求时可以读取这些数据。</p>
<h5 id="8-1-1-Cookie-工作步骤：">8.1.1 <strong>Cookie 工作步骤：</strong></h5>
<ol>
<li>客户端请求服务器，如果服务器需要记录该用户的状态，就是用 response 向客户端浏览器颁发一个 Cookie。</li>
<li>客户端浏览器会把 Cookie 保存下来。</li>
<li>当浏览器再请求该网站时，浏览器把该请求的网址连同 Cookie 一同提交给服务器。服务器检查该 Cookie，以此来辨认用户状态。</li>
</ol>
<p>注意：Cookie 功能需要浏览器的支持，如果浏览器不支持 Cookie 或者 Cookie 禁用了，Cookie 功能就会失效。</p>
<h5 id="8-1-2-Cookie-常用方法">8.1.2 <strong>Cookie 常用方法</strong></h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 服务端向客户端返回Cookie</span></span><br><span class="line"><span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;value&quot;</span>);</span><br><span class="line"><span class="comment">// 设置Cookie存活时间，以秒为单位</span></span><br><span class="line">cookie.setMaxAge(<span class="number">60</span>);</span><br><span class="line"><span class="comment">// 设置Cookie的路径，表示在该路径下的请求都会附带该Cookie</span></span><br><span class="line">cookie.setPath(<span class="string">&quot;/&quot;</span>);</span><br><span class="line"><span class="comment">// 设置Cookie的域名，可以实现跨子域的Cookie共享</span></span><br><span class="line">cookie.setDomain(<span class="string">&quot;.example.com&quot;</span>);</span><br><span class="line"><span class="comment">// 仅在HTTPS和SSL等安全协议中传输Cookie</span></span><br><span class="line">cookie.setSecure(<span class="type">boolean</span> flag)</span><br><span class="line"><span class="comment">// 添加到response</span></span><br><span class="line">resp.addCookie(cookie);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 服务端从客户端获取Cookie</span></span><br><span class="line">Cookie[] cookies = req.getCookies();</span><br><span class="line"><span class="comment">// 获取cookie的name</span></span><br><span class="line">cookie.getName();</span><br><span class="line"><span class="comment">// 获取cookie的value</span></span><br><span class="line">cookie.getValue();</span><br></pre></td></tr></table></figure>
<h5 id="8-1-3-Cookie-使用场景">8.1.3 <strong>Cookie 使用场景</strong></h5>
<p>当需要在客户端持久化少量数据时，比如用户偏好设置或语言选择等，可以选择使用 Cookie。</p>
<h4 id="8-2-Session">8.2 Session</h4>
<p>Session 是一种<mark>服务器端存储</mark>技术，它将用户会话数据保存在服务器上，并通过某种机制（通常是 Cookie）将 Session ID 传送给客户端。</p>
<h5 id="8-2-1-Session-工作原理：">8.2.1 <strong>Session 工作原理：</strong></h5>
<p>当第一次调用 <code>request.getSession()</code> 时，此时 Servlet 容器会创建一个 Session ，并且将其 sessionId 保存到 Cookie 中，然后回写给 response。因此，首次创建 Session 时的响应头中有 JSESSIONID 这个字段，后续的 request 默认都会带上 JSESSIONID 这个字段，而 response 中则不会再有该字段，服务器则根据 JSESSIONID 这个字段值查找对应的 Session。</p>
<p>具体来说，首次请求时响应头中的 Cookie 会有 JSESSIONID 字段，但请求头中是没有 Cookie 的；后续的请求中，响应头中则没有了 Cookie，但是请求头中会有包含 JSESSIONID 字段的 Cookie。</p>
<p><strong><font color=red>但是</font></strong>，如果浏览器禁用了 Cookie，request 中无法携带 Cookie 数据，那么，每次请求都会重新创建 Session，并且将 sessionId 回写到 response 的 Cookie 中。因为服务器没有获取到 JSESSIONID 这个值，也就无法根据 JSESSIONID 的值查找相应的 Session，也就是说，如果客户端禁用了 Cookie，那么每次请求得到的 sessionId 是不一样的。</p>
<h5 id="8-2-2-Session-常用方法">8.2.2 <strong>Session 常用方法</strong></h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取Session，没有则创建</span></span><br><span class="line"><span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> request.getSession();</span><br><span class="line"><span class="comment">// 判断当前Session是否为服务器新创建</span></span><br><span class="line">session.isNew();</span><br><span class="line"><span class="comment">// 获取sessionId</span></span><br><span class="line">session.getId();</span><br><span class="line"><span class="comment">// 保存数据，value是object类型</span></span><br><span class="line">session.setAttribute(<span class="string">&quot;key&quot;</span>,<span class="string">&quot;value&quot;</span>);</span><br><span class="line"><span class="comment">// 获取数据</span></span><br><span class="line">session.getAttribute(<span class="string">&quot;key&quot;</span>);</span><br><span class="line"><span class="comment">// 移除某个数据</span></span><br><span class="line">session.removeAttribute(<span class="string">&quot;key&quot;</span>);</span><br><span class="line"><span class="comment">// 获取session创建的时间</span></span><br><span class="line">session.getCreationTime();</span><br><span class="line"><span class="comment">// 最后一次修改session的时间</span></span><br><span class="line">session.getLastAccessedTime();</span><br><span class="line"><span class="comment">// 设置会话的超时时间（单位：秒），默认30分钟</span></span><br><span class="line">session.setMaxInactiveInterval(<span class="number">1</span>*<span class="number">60</span>*<span class="number">60</span>);</span><br><span class="line"><span class="comment">// 注销session</span></span><br><span class="line">session.invalidate();</span><br></pre></td></tr></table></figure>
<p>同样可以在 <code>web.xml</code> 实现 Session 超时时间：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Session设置 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">session-config</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 设置Session超时，单位为分钟 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">session-timeout</span>&gt;</span>30<span class="tag">&lt;/<span class="name">session-timeout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">session-config</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="8-2-3-Session-使用场景">8.2.3 <strong>Session 使用场景</strong></h5>
<p>当需要在服务器端持久化用户会话状态时，比如用户登录状态、购物车信息等，可以选择使用 Session。</p>
<h3 id="9-JSP">9. JSP</h3>
<p>JSP 全称 Java Server Pages，是一种动态网页开发技术，主要用于实现 JavaWeb 应用的用户界面部分。</p>
<p>JSP 文件必须放到 <code>/src/main/webapp</code> 下，文件名必须以 <code>.jsp</code> 结尾，整个文件与 HTML 并无太大区别，主要使用 JSP 标签在 HTML 网页中嵌入 Java 代码，标签通常以 <code>&lt;%</code> 开头，以 <code>%&gt;</code> 结束。</p>
<p>访问 JSP 页面时，直接指定完整路径，如：<code>localhost:8080/login_demo_war_exploded/login.jsp</code></p>
<h4 id="9-1-JSP-原理">9.1 JSP 原理</h4>
<p>JSP 和 Servlet 并无任何区别，JSP 本质上就是一个 Servlet，只不过无需配置映射路径，Web Server 会根据路径查找对应的 <code>.jsp</code> 文件，如果找到了，就自动编译成 Servlet 再执行，Servlet 会生成 HTML 内容并发送回客户端。在服务器运行过程中，如果修改了 JSP 的内容，那么服务器会自动重新编译。</p>
<blockquote>
<p>如果使用 IDEA 配置运行 Tomcat，JSP 文件编译后对应的 Servlet 目录位于：<code>C:\Users\用户名\AppData\Local\JetBrains\当前IDEA版本\tomcat\修改日期为最新的一个文件\work\Catalina\localhost\项目名\org\apache\jsp</code></p>
</blockquote>
<p>代码示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Generated by the Jasper component of Apache Tomcat</span></span><br><span class="line"><span class="comment"> * Version: Apache Tomcat/9.0.94</span></span><br><span class="line"><span class="comment"> * Generated at: 2024-10-08 16:50:38 UTC</span></span><br><span class="line"><span class="comment"> * Note: The last modified time of this file was set to</span></span><br><span class="line"><span class="comment"> *       the last modified time of the source file after</span></span><br><span class="line"><span class="comment"> *       generation to assist with modification tracking.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">package</span> org.apache.jsp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.jsp.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">index_jsp</span> <span class="keyword">extends</span> <span class="title class_">org</span>.apache.jasper.runtime.HttpJspBase</span><br><span class="line">    <span class="keyword">implements</span> <span class="title class_">org</span>.apache.jasper.runtime.JspSourceDependent,</span><br><span class="line">                 org.apache.jasper.runtime.JspSourceImports &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> javax.servlet.jsp.<span class="type">JspFactory</span> <span class="variable">_jspxFactory</span> <span class="operator">=</span></span><br><span class="line">          javax.servlet.jsp.JspFactory.getDefaultFactory();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> java.util.Map&lt;java.lang.String,java.lang.Long&gt; _jspx_dependants;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> java.util.Set&lt;java.lang.String&gt; _jspx_imports_packages;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> java.util.Set&lt;java.lang.String&gt; _jspx_imports_classes;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> &#123;</span><br><span class="line">    _jspx_imports_packages = <span class="keyword">new</span> <span class="title class_">java</span>.util.LinkedHashSet&lt;&gt;(<span class="number">4</span>);</span><br><span class="line">    _jspx_imports_packages.add(<span class="string">&quot;javax.servlet&quot;</span>);</span><br><span class="line">    _jspx_imports_packages.add(<span class="string">&quot;javax.servlet.http&quot;</span>);</span><br><span class="line">    _jspx_imports_packages.add(<span class="string">&quot;javax.servlet.jsp&quot;</span>);</span><br><span class="line">    _jspx_imports_classes = <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">volatile</span> javax.el.ExpressionFactory _el_expressionfactory;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">volatile</span> org.apache.tomcat.InstanceManager _jsp_instancemanager;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> java.util.Map&lt;java.lang.String,java.lang.Long&gt; getDependants() &#123;</span><br><span class="line">    <span class="keyword">return</span> _jspx_dependants;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> java.util.Set&lt;java.lang.String&gt; getPackageImports() &#123;</span><br><span class="line">    <span class="keyword">return</span> _jspx_imports_packages;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> java.util.Set&lt;java.lang.String&gt; getClassImports() &#123;</span><br><span class="line">    <span class="keyword">return</span> _jspx_imports_classes;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> javax.el.ExpressionFactory <span class="title function_">_jsp_getExpressionFactory</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (_el_expressionfactory == <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="keyword">synchronized</span> (<span class="built_in">this</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (_el_expressionfactory == <span class="literal">null</span>) &#123;</span><br><span class="line">          _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> _el_expressionfactory;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> org.apache.tomcat.InstanceManager <span class="title function_">_jsp_getInstanceManager</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (_jsp_instancemanager == <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="keyword">synchronized</span> (<span class="built_in">this</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (_jsp_instancemanager == <span class="literal">null</span>) &#123;</span><br><span class="line">          _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> _jsp_instancemanager;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">_jspInit</span><span class="params">()</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">_jspDestroy</span><span class="params">()</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">_jspService</span><span class="params">(<span class="keyword">final</span> javax.servlet.http.HttpServletRequest request, <span class="keyword">final</span> javax.servlet.http.HttpServletResponse response)</span></span><br><span class="line">      <span class="keyword">throws</span> java.io.IOException, javax.servlet.ServletException &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!javax.servlet.DispatcherType.ERROR.equals(request.getDispatcherType())) &#123;</span><br><span class="line">      <span class="keyword">final</span> java.lang.<span class="type">String</span> <span class="variable">_jspx_method</span> <span class="operator">=</span> request.getMethod();</span><br><span class="line">      <span class="keyword">if</span> (<span class="string">&quot;OPTIONS&quot;</span>.equals(_jspx_method)) &#123;</span><br><span class="line">        response.setHeader(<span class="string">&quot;Allow&quot;</span>,<span class="string">&quot;GET, HEAD, POST, OPTIONS&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (!<span class="string">&quot;GET&quot;</span>.equals(_jspx_method) &amp;&amp; !<span class="string">&quot;POST&quot;</span>.equals(_jspx_method) &amp;&amp; !<span class="string">&quot;HEAD&quot;</span>.equals(_jspx_method)) &#123;</span><br><span class="line">        response.setHeader(<span class="string">&quot;Allow&quot;</span>,<span class="string">&quot;GET, HEAD, POST, OPTIONS&quot;</span>);</span><br><span class="line">        response.sendError(HttpServletResponse.SC_METHOD_NOT_ALLOWED, <span class="string">&quot;JSP 只允许 GET、POST 或 HEAD。Jasper 还允许 OPTIONS&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> javax.servlet.jsp.PageContext pageContext;</span><br><span class="line">    javax.servlet.http.<span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">final</span> javax.servlet.ServletContext application;</span><br><span class="line">    <span class="keyword">final</span> javax.servlet.ServletConfig config;</span><br><span class="line">    javax.servlet.jsp.<span class="type">JspWriter</span> <span class="variable">out</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">final</span> java.lang.<span class="type">Object</span> <span class="variable">page</span> <span class="operator">=</span> <span class="built_in">this</span>;</span><br><span class="line">    javax.servlet.jsp.<span class="type">JspWriter</span> <span class="variable">_jspx_out</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    javax.servlet.jsp.<span class="type">PageContext</span> <span class="variable">_jspx_page_context</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      response.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">      pageContext = _jspxFactory.getPageContext(<span class="built_in">this</span>, request, response,</span><br><span class="line">      			<span class="literal">null</span>, <span class="literal">true</span>, <span class="number">8192</span>, <span class="literal">true</span>);</span><br><span class="line">      _jspx_page_context = pageContext;</span><br><span class="line">      application = pageContext.getServletContext();</span><br><span class="line">      config = pageContext.getServletConfig();</span><br><span class="line">      session = pageContext.getSession();</span><br><span class="line">      out = pageContext.getOut();</span><br><span class="line">      _jspx_out = out;</span><br><span class="line"></span><br><span class="line">      out.write(<span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;&lt;html&gt;\r\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;&lt;head&gt;\r\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;  &lt;title&gt;hello&lt;/title&gt;\r\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;  &lt;style&gt;\r\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;      body &#123;\r\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;          display: flex;\r\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;          align-items: center;\r\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;          justify-content: center;\r\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;          height: 100vh;\r\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;          background: white;\r\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;      &#125;\r\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;      h1 &#123;\r\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;          font-family: &#x27;Comic Sans MS&#x27;, serif;\r\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;          font-style: italic;\r\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;          font-weight: bold;\r\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;          font-size: 100px;\r\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;          background: linear-gradient(#e66465, #9198e5);\r\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;          -webkit-background-clip: text;\r\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;          background-clip: text;\r\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;          color: transparent;\r\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;          padding: 10px;\r\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;      &#125;\r\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;  &lt;/style&gt;\r\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;&lt;/head&gt;\r\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;&lt;body&gt;\r\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;&lt;h1&gt;hello, Servlet&lt;/h1&gt;\r\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;&lt;/body&gt;\r\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;&lt;/html&gt;\r\n&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (java.lang.Throwable t) &#123;</span><br><span class="line">      <span class="keyword">if</span> (!(t <span class="keyword">instanceof</span> javax.servlet.jsp.SkipPageException))&#123;</span><br><span class="line">        out = _jspx_out;</span><br><span class="line">        <span class="keyword">if</span> (out != <span class="literal">null</span> &amp;&amp; out.getBufferSize() != <span class="number">0</span>)</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (response.isCommitted()) &#123;</span><br><span class="line">              out.flush();</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">              out.clearBuffer();</span><br><span class="line">            &#125;</span><br><span class="line">          &#125; <span class="keyword">catch</span> (java.io.IOException e) &#123;&#125;</span><br><span class="line">        <span class="keyword">if</span> (_jspx_page_context != <span class="literal">null</span>) _jspx_page_context.handlePageException(t);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ServletException</span>(t);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">      _jspxFactory.releasePageContext(_jspx_page_context);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>其中主要方法是 <code>public void _jspService(...)</code></p>
<h4 id="9-2-JSP-基本语法">9.2 JSP 基本语法</h4>
<blockquote>
<p>本节主要参考：</p>
<p>[1]. <a target="_blank" rel="noopener" href="https://blog.csdn.net/mdong9/article/details/108467643?spm=1001.2014.3001.5502">【JavaWeb】JSP入门学习(全面)-CSDN博客</a></p>
<p>[2]. <a target="_blank" rel="noopener" href="https://blog.csdn.net/mdong9/article/details/108472516">【JavaWeb】JSP进阶：EL表达式和JSTL标签-CSDN博客</a></p>
<p>[3]. <a target="_blank" rel="noopener" href="https://blog.csdn.net/2301_79858914/article/details/139302163">JSP详解，看这一篇就够了（含示例）-CSDN博客</a></p>
</blockquote>
<h5 id="9-2-1-JSP-脚本元素">9.2.1 JSP 脚本元素</h5>
<ol>
<li>
<p><strong>表达式</strong>：<code>&lt;%= ... %&gt;</code>，用于输出表达式的值</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">  <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;afelixliu&quot;</span>;</span><br><span class="line">%&gt;</span><br><span class="line">name: &lt;%= name %&gt;</span><br><span class="line"></span><br><span class="line">&lt;%= <span class="keyword">new</span> <span class="title class_">java</span>.util.Date() %&gt;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>脚本片段</strong>：<code>&lt;% ... %&gt;</code>，包含任意Java代码，可以用来定义变量或编写控制结构，<font color=blue>最终代码会放在 <code>service()</code> 方法中</font></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">  <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt;<span class="number">3</span>; i++) &#123;</span><br><span class="line">    sum += i;</span><br><span class="line">  &#125;</span><br><span class="line">  out.print(<span class="string">&quot;&lt;h1&gt;0+1+2=&quot;</span>+sum+<span class="string">&quot;&lt;/h1&gt;&quot;</span>);</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">&lt;%</span><br><span class="line">  <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line">  out.print(x);</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">&lt;%</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">    out.write(<span class="string">&quot;&lt;h3&gt;hello, jsp_&quot;</span> + i + <span class="string">&quot;&lt;/h6&gt;&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>声明</strong>：<code>&lt;%! ... %&gt;</code>，用于定义<font color=blue>类级别</font>的变量和方法</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;%!</span><br><span class="line">  <span class="keyword">static</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;loading jsp&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">private</span> <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setT</span><span class="params">(<span class="type">int</span> t)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.t = t;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getT</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> t;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">say</span><span class="params">()</span> &#123;</span><br><span class="line">	System.out.println(<span class="string">&quot;hello, everyone&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h5 id="9-2-2-JSP-指令元素">9.2.2 JSP 指令元素</h5>
<p>JSP 指令用于配置 JSP 页面、导入资源文件，位于文件顶部。</p>
<p>JSP 指令分为三种：<code>page</code>、<code>include</code>、<code>taglib</code></p>
<ol>
<li>
<p><strong>页面指令 <code>&lt;%@ page ... %&gt;</code></strong></p>
<p>用于设置JSP页面属性。其常见属性有：</p>
<ul>
<li>
<p><code>contentType</code> ：等同于 <code>response.setContentType()</code>，作用：</p>
<ol>
<li>设置响应体的 mime 类型以及字符集</li>
<li>设置当前 JSP 页面的编码（只能是高级的 IDE 才能生效，如果使用低级工具，则需要设置 pageEncoding 属性设置当前页面的字符集）</li>
</ol>
</li>
<li>
<p><code>import</code> ：导包</p>
</li>
<li>
<p><code>errorPage</code> ：当前页面发生异常后，会自动跳转到指定的错误页面。</p>
</li>
<li>
<p><code>isErrorPage</code> ：标识当前页面是否是错误页面。属性值:</p>
<ul>
<li>true：是，可以使用内置对象 exception
<ul>
<li>false：否，默认值。不可以使用内置对象 exception</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line"></span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;java.util.ArrayList&quot;</span> %&gt;</span><br><span class="line"></span><br><span class="line">&lt;%@ page isErrorPage=<span class="string">&quot;true&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li><strong>包含指令 <code>&lt;%@ include file=&quot;...&quot; %&gt;</code></strong></li>
</ol>
<p>​	用于包含其他文件的内容。</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ include file=<span class="string">&quot;common/header.jsp&quot;</span>%&gt;</span><br><span class="line"></span><br><span class="line">&lt;%@ include file=<span class="string">&quot;common/footer.jsp&quot;</span>%&gt;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>
<p><strong>标签库指令 <code>&lt;%@ taglib uri=&quot;...&quot; prefix=&quot;...&quot; %&gt;</code></strong></p>
<p>用于引入自定义标签库。其属性有：</p>
<ul>
<li>
<p><code>prefix</code> ：前缀名称，自定义的，一般自定义为 <code>c</code></p>
</li>
<li>
<p><code>uri</code> ：统一资源标识，导入的资源</p>
</li>
</ul>
</li>
</ol>
<h5 id="9-2-3-JSP-动作元素">9.2.3 JSP 动作元素</h5>
<p>在 JSP 中，动作元素（也叫动作标签）用于执行特定的任务或操作，例如包含其他页面、转发请求、设置属性等。动作标签可以在 JSP 页面中以 XML 风格的标签形式使用，让开发者可以更方便地管理和控制页面的行为。</p>
<p>常用的动作标签及其用法：</p>
<ol>
<li><code>&lt;jsp:include&gt;</code> 标签用于在当前页面中包含其他页面的内容。被包含的页面可以是 JSP 页面、HTML 页面或者其他文本文件。</li>
<li><code>&lt;jsp:forward&gt;</code> 标签用于将请求转发到其他页面，通常用于实现请求的重定向。</li>
<li><code>&lt;jsp:useBean&gt;</code> 标签用于在页面中创建或定位一个 JavaBean 实例，使得页面可以使用该 JavaBean 中的属性和方法。</li>
<li><code>&lt;jsp:setProperty&gt;</code> 标签用于设置 JavaBean 实例的属性值，<code>&lt;jsp:getProperty&gt;</code> 标签用于获取 JavaBean 实例的属性值。</li>
<li><code>&lt;jsp:param&gt;</code> 标签用于在包含其他页面或转发请求时，传递参数给被包含的页面或转发的目标页面。</li>
<li><code>&lt;jsp:plugin&gt;</code> 标签用于嵌入 Applet 或者其他对象到生成的页面中。</li>
</ol>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:forward page=<span class="string">&quot;/jsp-forward.jsp&quot;</span>&gt;</span><br><span class="line">    &lt;jsp:param name=<span class="string">&quot;name&quot;</span> value=<span class="string">&quot;&lt;%=name%&gt;&quot;</span>&gt;&lt;/jsp:param&gt;</span><br><span class="line">    &lt;jsp:param name=<span class="string">&quot;age&quot;</span> value=<span class="string">&quot;18&quot;</span>&gt;&lt;/jsp:param&gt;</span><br><span class="line">&lt;/jsp:forward&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">name: &lt;%= request.getParameter(<span class="string">&quot;name&quot;</span>) %&gt; &lt;br /&gt;</span><br><span class="line">age: &lt;%= request.getParameter(<span class="string">&quot;age&quot;</span>) %&gt;</span><br></pre></td></tr></table></figure>
<p>注意：使用 <code>&lt;%@ include file=&quot;...&quot; %&gt;</code> 会将两个页面合二为一，使用 <code>&lt;jsp:include&gt;</code> 拼接页面，本质还是分开的。</p>
<h4 id="9-3-JSP-内置对象">9.3 JSP 内置对象</h4>
<p>JSP 的内置对象是指在 JSP 页面中不需要获取和创建，可以直接使用的对象。JSP 一共有 <strong><font color=red>9</font></strong> 个内置对象：</p>
<table>
<thead>
<tr>
<th>变量名</th>
<th>真实类型</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>pageContext</td>
<td>PageContext</td>
<td>提供对各种范围对象（如 page、request、session、application）的统一访问</td>
</tr>
<tr>
<td>request</td>
<td>HttpServletRequest</td>
<td>表示客户端的请求，包含请求参数、头信息、请求方法等</td>
</tr>
<tr>
<td>response</td>
<td>HttpServletResponse</td>
<td>表示服务器对客户端的响应，可以设置响应头、状态码和发送数据</td>
</tr>
<tr>
<td>out</td>
<td>JspWriter</td>
<td>用于向客户端输出内容，类似于标准的Java <code>PrintWriter</code></td>
</tr>
<tr>
<td>session</td>
<td>HttpSession</td>
<td>表示一个用户会话，用于在多个请求间保持用户数据</td>
</tr>
<tr>
<td>application</td>
<td>ServletContext</td>
<td>表示 Web 应用程序的上下文，可以在整个应用中共享数据</td>
</tr>
<tr>
<td>config</td>
<td>ServletConfig</td>
<td>Servlet的配置对象</td>
</tr>
<tr>
<td>page</td>
<td>Object</td>
<td>表示当前的 JSP 页面对象，等同于 <code>this</code> 关键字</td>
</tr>
<tr>
<td>exception</td>
<td>Throwable</td>
<td>在 JSP 页面中处理未捕获的异常时使用，通常在错误页面中使用</td>
</tr>
</tbody>
</table>
<p><font color=red><strong>JSP 四大作用域对象</strong></font></p>
<table>
<thead>
<tr>
<th>对象名称</th>
<th>作用范围</th>
</tr>
</thead>
<tbody>
<tr>
<td>application</td>
<td>整个应用都有效</td>
</tr>
<tr>
<td>session</td>
<td>在当前会话中有效</td>
</tr>
<tr>
<td>request</td>
<td>在当前请求中有效</td>
</tr>
<tr>
<td>page</td>
<td>在当前页面有效</td>
</tr>
</tbody>
</table>
<p>同页：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">  pageContext.setAttribute(<span class="string">&quot;age_1&quot;</span>, <span class="number">18</span>);</span><br><span class="line">  request.setAttribute(<span class="string">&quot;age_2&quot;</span>, <span class="number">19</span>);</span><br><span class="line">  session.setAttribute(<span class="string">&quot;age_3&quot;</span>, <span class="number">20</span>);</span><br><span class="line">  application.setAttribute(<span class="string">&quot;age_4&quot;</span>, <span class="number">21</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//  跨页时取消注释</span></span><br><span class="line"><span class="comment">//  pageContext.forward(&quot;/attribute-scope.jsp&quot;);</span></span><br><span class="line">%&gt;</span><br><span class="line">&lt;%</span><br><span class="line">  <span class="type">int</span> <span class="variable">age_1</span> <span class="operator">=</span> (<span class="type">int</span>) pageContext.findAttribute(<span class="string">&quot;age_1&quot;</span>);</span><br><span class="line">  <span class="type">int</span> <span class="variable">age_2</span> <span class="operator">=</span> (<span class="type">int</span>) pageContext.findAttribute(<span class="string">&quot;age_2&quot;</span>);</span><br><span class="line">  <span class="type">int</span> <span class="variable">age_3</span> <span class="operator">=</span> (<span class="type">int</span>) pageContext.findAttribute(<span class="string">&quot;age_3&quot;</span>);</span><br><span class="line">  <span class="type">int</span> <span class="variable">age_4</span> <span class="operator">=</span> (<span class="type">int</span>) pageContext.findAttribute(<span class="string">&quot;age_4&quot;</span>);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;h3&gt;$&#123;age_1&#125;&lt;/h3&gt;</span><br><span class="line">&lt;h3&gt;$&#123;age_2&#125;&lt;/h3&gt;</span><br><span class="line">&lt;h3&gt;$&#123;age_3&#125;&lt;/h3&gt;</span><br><span class="line">&lt;h3&gt;$&#123;age_4&#125;&lt;/h3&gt;</span><br><span class="line">&lt;h3&gt;&lt;%=pageContext.findAttribute(<span class="string">&quot;age_5&quot;</span>)%&gt;&lt;/h3&gt;</span><br></pre></td></tr></table></figure>
<p>跨页：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line"><span class="comment">//  int age_1 = (int) pageContext.findAttribute(&quot;age_1&quot;); // pageContext作用域无法跨页面</span></span><br><span class="line">  <span class="type">int</span> <span class="variable">age_2</span> <span class="operator">=</span> (<span class="type">int</span>) pageContext.findAttribute(<span class="string">&quot;age_2&quot;</span>);</span><br><span class="line">  <span class="type">int</span> <span class="variable">age_3</span> <span class="operator">=</span> (<span class="type">int</span>) pageContext.findAttribute(<span class="string">&quot;age_3&quot;</span>);</span><br><span class="line">  <span class="type">int</span> <span class="variable">age_4</span> <span class="operator">=</span> (<span class="type">int</span>) pageContext.findAttribute(<span class="string">&quot;age_4&quot;</span>);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;h3&gt;$&#123;age_1&#125;&lt;/h3&gt;</span><br><span class="line">&lt;h3&gt;$&#123;age_2&#125;&lt;/h3&gt;</span><br><span class="line">&lt;h3&gt;$&#123;age_3&#125;&lt;/h3&gt;</span><br><span class="line">&lt;h3&gt;$&#123;age_4&#125;&lt;/h3&gt;</span><br><span class="line">&lt;h3&gt;&lt;%=pageContext.findAttribute(<span class="string">&quot;age_5&quot;</span>)%&gt;&lt;/h3&gt;</span><br></pre></td></tr></table></figure>
<p><strong><code>response.getWriter()</code> 和 <code>out.write()</code> 的区别：</strong></p>
<ol>
<li>在 Tomcat 服务器真正给客户端做出响应之前，会先找 response 缓冲区数据，再找 out 缓冲区数据</li>
<li><code>response.getWriter()</code> 数据输出永远在 <code>out.write()</code> 之前</li>
</ol>
<h4 id="9-4-JSP-注释">9.4 JSP 注释</h4>
<p>有两种注释的方式：</p>
<ol>
<li><code>&lt;!-- 内容 --&gt;</code> ：html 注释，只能注释 html 代码片段</li>
<li><code>&lt;%-- 内容 --%&gt;</code> ：ISP 注释，可以注释所有（推荐使用）</li>
</ol>
<p>JSP 注释不会在客户端显示，HTML 注释就会！</p>
<h4 id="9-5-JSTL-标签库">9.5 JSTL 标签库</h4>
<p>JSTL（Java server pages standard tag library，即 JSP 标准标签库），JSTL 标签是基于 JSP 页面的，这些标签可以插入在JSP代码中，本质上 JSTL 也是提前定义好的一组标签，这些标签封装了不同的功能，在页面上调用标签时，就等于调用了封装起来的功能。JSTL 的目标是使 JSP 页面的可读性更强、简化 JSP 页面的设计、实现了代码复用、提高效率。</p>
<h5 id="9-5-1-JSTL-标签分类">9.5.1 JSTL 标签分类</h5>
<p>根据 JSTL 标签所提供的功能，可以将其分为 5 个类别：</p>
<ol>
<li>
<p>核心标签</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">&quot;c&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>格式化标签</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">&quot;fmt&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/fmt&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>SQL 标签</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">&quot;sql&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/sql&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>XML 标签</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">&quot;x&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/xml&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>JSTL 标签</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">&quot;fn&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/functions&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h5 id="9-5-2-JSTL-使用步骤">9.5.2  JSTL 使用步骤</h5>
<ol>
<li>
<p>导入 jstl 相关 jar 包</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/javax.servlet/jstl --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.taglibs/taglibs-standard-impl --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.taglibs<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>taglibs-standard-impl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>在 JSP 页面中引入对应的 taglib</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">&quot;c&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>使用标签（具体标签使用可参考：<a target="_blank" rel="noopener" href="https://www.runoob.com/jsp/jsp-jstl.html">JSP 标准标签库（JSTL） | 菜鸟教程 (runoob.com)</a>）</p>
</li>
</ol>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;form method=<span class="string">&quot;get&quot;</span> action=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/demo.jsp&quot;</span>&gt;</span><br><span class="line">  &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span> /&gt;</span><br><span class="line">  &lt;input type=<span class="string">&quot;submit&quot;</span> /&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;c:<span class="keyword">if</span> test=<span class="string">&quot;$&#123;param.username.equals(&#x27;admin&#x27;)&#125;&quot;</span>&gt;</span><br><span class="line">  &lt;c:out value=<span class="string">&quot;welcome&quot;</span> /&gt;</span><br><span class="line">&lt;/c:<span class="keyword">if</span>&gt;</span><br><span class="line">&lt;br /&gt;</span><br><span class="line">&lt;c:out value=<span class="string">&quot;input is $&#123;param.username&#125;&quot;</span> /&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;c:set <span class="keyword">var</span>=<span class="string">&quot;score&quot;</span> value=<span class="string">&quot;80&quot;</span> /&gt;</span><br><span class="line">&lt;c:choose&gt;</span><br><span class="line">  &lt;c:when test=<span class="string">&quot;$&#123;score &gt;= 90&#125;&quot;</span>&gt;</span><br><span class="line">    成绩优秀</span><br><span class="line">  &lt;/c:when&gt;</span><br><span class="line">  &lt;c:when test=<span class="string">&quot;$&#123;score &gt;= 80&#125;&quot;</span>&gt;</span><br><span class="line">    成绩良好</span><br><span class="line">  &lt;/c:when&gt;</span><br><span class="line">  &lt;c:when test=<span class="string">&quot;$&#123;score &gt;= 60&#125;&quot;</span>&gt;</span><br><span class="line">    成绩及格</span><br><span class="line">  &lt;/c:when&gt;</span><br><span class="line">  &lt;c:otherwise&gt;</span><br><span class="line">    成绩不合格</span><br><span class="line">  &lt;/c:otherwise&gt;</span><br><span class="line">&lt;/c:choose&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">  ArrayList&lt;String&gt; arr = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line">  arr.add(<span class="string">&quot;A&quot;</span>);</span><br><span class="line">  arr.add(<span class="string">&quot;B&quot;</span>);</span><br><span class="line">  arr.add(<span class="string">&quot;C&quot;</span>);</span><br><span class="line">  request.setAttribute(<span class="string">&quot;arr&quot;</span>, arr);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;c:forEach <span class="keyword">var</span>=<span class="string">&quot;t&quot;</span> items=<span class="string">&quot;$&#123;arr&#125;&quot;</span>&gt;</span><br><span class="line">  &lt;c:out value=<span class="string">&quot;$&#123;t&#125;&quot;</span> /&gt;</span><br><span class="line">&lt;/c:forEach&gt;</span><br></pre></td></tr></table></figure>
<h4 id="9-6-EL-表达式">9.6 EL 表达式</h4>
<p>JSTL 仅是 JSP 表达式语言，而 EL 既是 HTML 也是 JSP 表达式语言，全称是Expression Language，可以用来替换和简化 JSP 页面中 Java 代码的编写。</p>
<p><strong>语法格式</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$&#123;表达式&#125;</span><br></pre></td></tr></table></figure>
<p><strong>注意事项</strong></p>
<p>JSP 默认支持 EL 表达式。如果要忽略 EL 表达式，有以下两种方法实现：</p>
<ol>
<li>设置 jsp 中 page 指令中：属性 <code>isELIgnored=&quot;true&quot;</code>  忽略当前 jsp 页面中所有的 EL 表达式</li>
<li><code>\$&#123;表达式&#125;</code> ：在 $ 符号前面加上反斜杠 \，表示忽略当前这个 EL 表达式。</li>
</ol>
<p><strong>EL 表达式 的使用</strong></p>
<p>（1）运算</p>
<p>表达式中支持以下运算符：</p>
<ul>
<li>算数运算符： +   -    *    /(或div)    %(或mod)</li>
<li>比较运算符： &gt;   &lt;    &gt;=   &lt;=    ==    !=</li>
<li>逻辑运算符： &amp;&amp;(and)    ||(or)    !(not)</li>
<li>空运算符： empty</li>
</ul>
<p>空运算符empty的功能比较强大，用于判断字符串、集合、数组对象是否为 null 或者长度是否为 0，使用如下：</p>
<ul>
<li><code>$&#123;empty list&#125;</code>：判断字符串、集合、数组对象是否为 null 或者长度为 0</li>
<li><code>$&#123;not empty str&#125;</code>：表示判断字符串、集合、数组对象是否不为 null 并且长度 &gt;0</li>
</ul>
<p>（2）获取值</p>
<p><font color=orange><strong>EL表达式只能从域对象中获取值</strong></font>，</p>
<p>语法：<code>$&#123;域名称.键名&#125;</code>：从指定域中获取指定键的值。</p>
<p>常见域有：</p>
<table>
<thead>
<tr>
<th>域名称</th>
<th>对应的域</th>
</tr>
</thead>
<tbody>
<tr>
<td>pageScope</td>
<td>pageContext域</td>
</tr>
<tr>
<td>requestScope</td>
<td>request域</td>
</tr>
<tr>
<td>sessionScope</td>
<td>session域</td>
</tr>
<tr>
<td>applicationScope</td>
<td>application（ServletContext）全局域</td>
</tr>
</tbody>
</table>
<p>域大小：pageContext &lt; request &lt; session &lt; application（ServletContext）</p>
<p>简化语法：</p>
<p><code>$&#123;键名&#125;</code>：表示依次从最小的域中查找是否有该键名对应的值，直到找到为止。没有则不显示</p>
<p>（3）获取对象、List 集合、Map 集合的值</p>
<ul>
<li>
<p>获取对象的值，语法如下：</p>
<ul>
<li><code>$&#123;域名称.键名&#125;</code>：域中某个键的值是一个对象</li>
<li><code>$&#123;域名称.键名.属性名&#125;</code>：获取对象的属性值， 本质上会去调用对象的 getter 方法</li>
</ul>
</li>
<li>
<p>获取 List 集合的值，语法如下：</p>
<p><code>$&#123;域名称.键名[索引]&#125;</code>：域中某个键的值是一个 List 对象，加上索引可以获取到集合中对应的值</p>
</li>
<li>
<p>获取 Map 集合的值，有两种方式：</p>
<ul>
<li><code>$&#123;域名称.键名.key名称&#125;</code></li>
<li><code>$&#123;域名称.键名[&quot;key名称&quot;]&#125;</code></li>
</ul>
</li>
</ul>
<p>（4）使用 JSP 内置对象</p>
<p>一般利用 pageContext 来获取 JSP 其他八个内置对象</p>
<p>pageContext 对象常用于动态获取虚拟目录：<code>$&#123;pageContext.request.contextPath&#125;</code></p>
<h4 id="9-7-配置-error-page">9.7 配置 error-page</h4>
<p>在 <code>web.xml</code> 中有两种配置 error-page 的方法：</p>
<p><strong>一、通过错误码来配置 error-page</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">error-page</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">error-code</span>&gt;</span>404<span class="tag">&lt;/<span class="name">error-code</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">location</span>&gt;</span>/error-404.jsp<span class="tag">&lt;/<span class="name">location</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">error-page</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>当系统发生 404 错误时，跳转到错误处理页面 <code>error-404.jsp</code></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page isErrorPage=<span class="string">&quot;true&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">  &lt;title&gt;<span class="number">404</span> Page Not Found&lt;/title&gt;</span><br><span class="line">  &lt;style&gt;</span><br><span class="line">    body &#123;</span><br><span class="line">      font-family: Arial, sans-serif;</span><br><span class="line">      text-align: center;</span><br><span class="line">      background-color: #f5f5f5;</span><br><span class="line">    &#125;</span><br><span class="line">    h1 &#123;</span><br><span class="line">      font-size: 36px;</span><br><span class="line">      color: #<span class="number">333</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    p &#123;</span><br><span class="line">      font-size: 18px;</span><br><span class="line">      color: #<span class="number">666</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;<span class="number">404</span> - Page Not Found&lt;/h1&gt;</span><br><span class="line">&lt;p&gt;Sorry, the page you are looking <span class="keyword">for</span> does not exist.&lt;/p&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p><strong>二、通过异常的类型配置 error-page</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">error-page</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exception-type</span>&gt;</span>java.lang.NullPointException<span class="tag">&lt;/<span class="name">exception-type</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">location</span>&gt;</span>/error.jsp<span class="tag">&lt;/<span class="name">location</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">error-page</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>当系统发生 <code>java.lang.NullPointException</code> 时，跳转到处理页面 <code>error.jsp</code></p>
<h3 id="10-JavaBean">10. JavaBean</h3>
<p>JavaBean 是一个 Java 类，满足以下条件：</p>
<ol>
<li>public 修饰的类</li>
<li>public 无参构造</li>
<li>所有属性（如果有）都是 private，并且提供 set/get (如果 boolean 则 get 可以替换成 is)</li>
</ol>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.afelixliu.javaweb.jsp.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">()</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(<span class="type">int</span> id, String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&#x27;&quot;</span> + age + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:useBean id=<span class="string">&quot;user&quot;</span> class=<span class="string">&quot;pers.afelixliu.javaweb.jsp.entity.User&quot;</span> scope=<span class="string">&quot;page&quot;</span> /&gt;</span><br><span class="line">&lt;jsp:setProperty name=<span class="string">&quot;user&quot;</span> property=<span class="string">&quot;id&quot;</span> value=<span class="string">&quot;1&quot;</span> /&gt;</span><br><span class="line">&lt;jsp:setProperty name=<span class="string">&quot;user&quot;</span> property=<span class="string">&quot;name&quot;</span> value=<span class="string">&quot;afelixliu&quot;</span> /&gt;</span><br><span class="line">&lt;jsp:setProperty name=<span class="string">&quot;user&quot;</span> property=<span class="string">&quot;age&quot;</span> value=<span class="string">&quot;18&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">用户id：&lt;jsp:getProperty name=<span class="string">&quot;user&quot;</span> property=<span class="string">&quot;id&quot;</span> /&gt;</span><br><span class="line">用户名：&lt;jsp:getProperty name=<span class="string">&quot;user&quot;</span> property=<span class="string">&quot;name&quot;</span> /&gt;</span><br><span class="line">年龄&lt;jsp:getProperty name=<span class="string">&quot;user&quot;</span> property=<span class="string">&quot;age&quot;</span> /&gt;</span><br></pre></td></tr></table></figure>
<h3 id="11-MVC">11. MVC</h3>
<p>Model：模型持有所有的数据、状态和程序逻辑</p>
<ul>
<li>数据承载Bean，指实体类，专门承载业务数据</li>
<li>业务处理Bean，指Service或Dao对象，专门处理用户请求</li>
</ul>
<p>View：负责界面的布局和显示</p>
<p>Controller：负责模型和界面之间的交互</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/d4070580/MVC.png" class="">
<h3 id="12-Filter">12. Filter</h3>
<p>过滤器（Filter）是 JavaWeb 应用中重要的组件之一，它用于在请求到达 Servlet 之前或响应返回客户端之前对请求和响应进行处理。</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/d4070580/Filter.webp" class="">
<p><strong>过滤器的生命周期</strong></p>
<ol>
<li>构造器方法</li>
<li><code>init()</code> 初始化方法</li>
<li><code>doFilter()</code> 方法 (其中有 <code>filterChain.doFilter(...)</code> 方法)
<ul>
<li>在 <code>doFilter()</code> 方法中，可以通过 <code>filterChain.doFilter(...)</code> 方法控制请求是否继续向后传递</li>
<li>在 <code>doFilter()</code> 方法中，同样可以使用 HttpRequest 处理请求，使用 HttpResponse 对象作出响应</li>
</ul>
</li>
<li><code>destroy()</code> 方法</li>
</ol>
<p>其中：</p>
<ul>
<li>1 和 2 在 web 工程启动的时候执行；</li>
<li>符合拦截路径的请求发送到服务器的时候，自动执行 3，若请求不属于拦截路径，则不会执行；</li>
<li>停止 web 工程的时候执行 4</li>
</ul>
<p><strong>过滤器的使用：</strong></p>
<ol>
<li>
<p>实现 Filter 接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.afelixliu.javaweb.jsp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CustomFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">        Filter.<span class="built_in">super</span>.init(filterConfig);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">        servletRequest.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        servletResponse.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        servletResponse.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">        filterChain.doFilter(servletRequest, servletResponse);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line">        Filter.<span class="built_in">super</span>.destroy();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>注册配置 Filter</p>
<p>方式一：在 <code>web.xml</code> 注册配置 Filter</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Filter注册 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>custom_filter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>pers.afelixliu.javaweb.jsp.CustomFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Filter配置 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>custom_filter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/filter-demo/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>方式二：在 Filter 类上使用 <code>@WebFilter</code> 注解进行配置</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebFilter(filterName = &quot;CustomFilter&quot;, urlPatterns = &quot;/*&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CustomFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line">    <span class="comment">// 过滤器的实现</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<blockquote>
<p><strong><font color=red>在 Filter 类的 <code>doFilter()</code> 方法中，开发者需要显式调用 <code>FilterChain</code> 的 <code>doFilter()</code> 方法，以便请求能够继续传递到下一个过滤器。如果在某个过滤器的 <code>doFilter()</code> 方法中没有调用 <code>FilterChain</code> 的 <code>doFilter()</code> 方法，请求将被阻塞，不会继续传递到后续的 Filter 或 Servlet。</font></strong></p>
</blockquote>
<p><strong>Filter 拦截路径配置</strong></p>
<p>拦截路径表示 Filter 会对请求的哪些资源进行拦截，使用 @WebFilter 注解进行配置。如：<code>@WebFilter(&quot;拦截路径&quot;)</code></p>
<p>拦截路径有如下四种配置方式：</p>
<ul>
<li>拦截具体的资源：<code>/index.jsp</code>，只有访问 <code>index.jsp</code> 时才会被拦截</li>
<li>目录拦截：<code>/user/*</code>，访问 <code>/user</code> 下的所有资源，都会被拦截</li>
<li>后缀名拦截：<code>*.jsp</code>，访问后缀名为 jsp 的资源，都会被拦截</li>
<li>拦截所有：<code>/*</code>，访问所有资源，都会被拦截</li>
</ul>
<p><strong>过滤器链</strong></p>
<p>过滤器链是指在一个 Web 应用，可以配置多个过滤器，这多个过滤器称为过滤器链。</p>
<p>过滤器链中的过滤器的优先级根据过滤器类名字母序列进行字典排列。</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/d4070580/FilterChain.png" class="">
<p>上图中的过滤器链执行是按照以下流程执行：</p>
<ol>
<li>执行 Filter1 的放行前逻辑代码</li>
<li>执行 Filter1 的放行代码</li>
<li>执行 Filter2 的放行前逻辑代码</li>
<li>执行 Filter2 的放行代码</li>
<li>访问到资源</li>
<li>执行 Filter2 的放行后逻辑代码</li>
<li>执行 Filter1 的放行后逻辑代码</li>
</ol>
<p>以上流程串起来就像一条链子，故称之为过滤器链。</p>
<h3 id="13-Listener">13. Listener</h3>
<p>Listener 提供了一种机制，使开发者能够编写 Listener 类来监听容器事件，并在事件发生时执行相应的逻辑。这样的机制使得开发者能够在不修改源代码的情况下，通过监听器对现有应用程序进行扩展或增强。</p>
<p><strong>Listener 类型</strong></p>
<p>JavaWeb 提供了多种类型的 Listener，其中最常见的有以下三种：</p>
<ul>
<li><strong>ServletContextListener（上下文监听器）</strong>：用于监听 Web 应用程序的启动和关闭事件</li>
<li><strong>HttpSessionListener（会话监听器）</strong>：用于监听会话的创建和销毁事件</li>
<li><strong>ServletRequestListener（请求监听器）</strong>：用于监听请求的创建和销毁事件</li>
</ul>
<p><strong>Listener 的生命周期</strong></p>
<p>Listener 的生命周期由容器管理，容器会在适当的时机调用监听器的方法。</p>
<ol>
<li>
<p>ServletContextListener 生命周期</p>
<p>ServletContextListener 接口定义了两个方法：</p>
<ul>
<li><strong>contextInitialized(ServletContextEvent sce)</strong>：在 Web 应用程序初始化时被调用。</li>
<li><strong>contextDestroyed(ServletContextEvent sce)</strong>：在 Web 应用程序销毁时被调用。</li>
</ul>
</li>
<li>
<p>HttpSessionListener 生命周期</p>
<p>HttpSessionListener 接口也定义了两个方法：</p>
<ul>
<li>
<p><strong>sessionCreated(HttpSessionEvent se)</strong>：在会话创建时被调用。</p>
</li>
<li>
<p><strong>sessionDestroyed(HttpSessionEvent se)</strong>：在会话销毁时被调用。</p>
</li>
</ul>
</li>
<li>
<p>ServletRequestListener 生命周期</p>
<p>ServletRequestListener 接口同样定义了两个方法：</p>
<ul>
<li>
<p><strong>requestInitialized(ServletRequestEvent sre)</strong>：在请求创建时被调用。</p>
</li>
<li>
<p><strong>requestDestroyed(ServletRequestEvent sre)</strong>：在请求销毁时被调用。</p>
</li>
</ul>
</li>
</ol>
<p><strong>监听器的使用：</strong></p>
<ol>
<li>
<p>实现相应的接口（以 HttpSessionListener 为例）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.afelixliu.javaweb.jsp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContext;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSessionEvent;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSessionListener;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SessionListenerDemo</span> <span class="keyword">implements</span> <span class="title class_">HttpSessionListener</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sessionCreated</span><span class="params">(HttpSessionEvent se)</span> &#123;</span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">context</span> <span class="operator">=</span> se.getSession().getServletContext();</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">num</span> <span class="operator">=</span> (Integer) context.getAttribute(<span class="string">&quot;OnlineUsers&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (num == <span class="literal">null</span>) &#123;</span><br><span class="line">            num = <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            num = num + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        context.setAttribute(<span class="string">&quot;OnlineUsers&quot;</span>, num);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sessionDestroyed</span><span class="params">(HttpSessionEvent se)</span> &#123;</span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">context</span> <span class="operator">=</span> se.getSession().getServletContext();</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">num</span> <span class="operator">=</span> (Integer) context.getAttribute(<span class="string">&quot;OnlineUsers&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (num == <span class="literal">null</span>) &#123;</span><br><span class="line">            num = <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            num = num - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        context.setAttribute(<span class="string">&quot;OnlineUsers&quot;</span>, num);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>注册 Listener</p>
<p>方式一：在 <code>web.xml</code> 注册配置 Listener</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Listener注册 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>pers.afelixliu.javaweb.jsp.SessionListenerDemo<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>方式二：在 Listener 类上使用 <code>@WebListener</code> 注解进行配置</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebListener</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SessionListenerDemo</span> <span class="keyword">implements</span> <span class="title class_">HttpSessionListener</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sessionCreated</span><span class="params">(HttpSessionEvent se)</span> &#123;</span><br><span class="line">        <span class="comment">// 在会话创建时执行初始化操作</span></span><br><span class="line">        System.out.println(<span class="string">&quot;会话创建：&quot;</span> + se.getSession().getId());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sessionDestroyed</span><span class="params">(HttpSessionEvent se)</span> &#123;</span><br><span class="line">        <span class="comment">// 在会话销毁时执行清理操作</span></span><br><span class="line">        System.out.println(<span class="string">&quot;会话销毁：&quot;</span> + se.getSession().getId());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><strong>JavaWeb 三大组件：Servlet、Filter、Listener</strong></p>
<h3 id="14-JUnit-单元测试使用">14. JUnit 单元测试使用</h3>
<p><strong>配置依赖：</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.13.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- &lt;scope&gt;test&lt;/scope&gt; --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>简单使用：</strong></p>
<p>使用 <code>@Test</code> 注解，该注解只有在方法上有效，只要加了这个注解的方法，就可以直接运行，而不用运行 <code>main()</code> 方法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.afelixliu.javaweb.logindemo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JUnitTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">t1</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;t1&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">t2</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">1</span> / <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://afelixliu.site">红油曲奇</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://afelixliu.site/posts/d4070580/">https://afelixliu.site/posts/d4070580/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://afelixliu.site" target="_blank">红油曲奇的个人博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="addtoany"><div class="a2a_kit a2a_kit_size_32 a2a_default_style"><a class="a2a_button_twitter"></a><a class="a2a_button_pocket"></a><a class="a2a_button_evernote"></a><a class="a2a_button_wechat"></a><a class="a2a_button_copy_link"></a><a class="a2a_dd" target="_blank" rel="noopener" href="https://www.addtoany.com/share"></a></div></div><script async="async" src="https://static.addtoany.com/menu/page.js"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-full"><a href="/posts/72bf0210/" title="Tomcat 与 JDK 版本的对应关系"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="onerror=null;src='/img/404.png'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Tomcat 与 JDK 版本的对应关系</div></div></a></div></nav><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div><div id="comment-switch"><span class="first-comment">Twikoo</span><span class="switch-btn"></span><span class="second-comment">Giscus</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div><div><div id="giscus-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">红油曲奇</div><div class="author-info__description">“技术探索与分享”</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">27</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/AFelixLiu"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">HELLO, WELCOME TO MY BLOG!</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-JavaWeb"><span class="toc-text">1. JavaWeb</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Web-%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F"><span class="toc-text">2. Web 应用程序</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-%E9%9D%99%E6%80%81-Web"><span class="toc-text">2.1 静态 Web</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-%E5%8A%A8%E6%80%81-Web"><span class="toc-text">2.2 动态 Web</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%8A%80%E6%9C%AF%E5%90%8D%E8%AF%8D"><span class="toc-text">3. 技术名词</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-Tomcat"><span class="toc-text">4. Tomcat</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-HTTP"><span class="toc-text">5. HTTP</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-HTTP-%E8%AF%B7%E6%B1%82"><span class="toc-text">5.1 HTTP 请求</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-HTTP-%E5%93%8D%E5%BA%94"><span class="toc-text">5.2 HTTP 响应</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-Maven"><span class="toc-text">6. Maven</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-%E9%85%8D%E7%BD%AE-Maven"><span class="toc-text">6.1 配置 Maven</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-pom-xml-%E6%96%87%E4%BB%B6"><span class="toc-text">6.2 pom.xml 文件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-Servlet"><span class="toc-text">7. Servlet</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-1-Servlet-%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84"><span class="toc-text">7.1 Servlet 层次结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-%E8%A1%A5%E5%85%85%EF%BC%9AServlet-%E5%AE%B9%E5%99%A8%E3%80%81Web-%E5%AE%B9%E5%99%A8"><span class="toc-text">7.2 补充：Servlet 容器、Web 容器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-3-Servlet-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-text">7.3 Servlet 生命周期</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-4-ServletContext"><span class="toc-text">7.4 ServletContext</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-5-HttpServletResponse"><span class="toc-text">7.5 HttpServletResponse</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-6-HttpServletRequest"><span class="toc-text">7.6 HttpServletRequest</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-Cookie-%E4%B8%8E-Session"><span class="toc-text">8. Cookie 与 Session</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-1-Cookie"><span class="toc-text">8.1 Cookie</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#8-1-1-Cookie-%E5%B7%A5%E4%BD%9C%E6%AD%A5%E9%AA%A4%EF%BC%9A"><span class="toc-text">8.1.1 Cookie 工作步骤：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-1-2-Cookie-%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-text">8.1.2 Cookie 常用方法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-1-3-Cookie-%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-text">8.1.3 Cookie 使用场景</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-2-Session"><span class="toc-text">8.2 Session</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#8-2-1-Session-%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%EF%BC%9A"><span class="toc-text">8.2.1 Session 工作原理：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-2-2-Session-%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-text">8.2.2 Session 常用方法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-2-3-Session-%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-text">8.2.3 Session 使用场景</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-JSP"><span class="toc-text">9. JSP</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#9-1-JSP-%E5%8E%9F%E7%90%86"><span class="toc-text">9.1 JSP 原理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-2-JSP-%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-text">9.2 JSP 基本语法</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#9-2-1-JSP-%E8%84%9A%E6%9C%AC%E5%85%83%E7%B4%A0"><span class="toc-text">9.2.1 JSP 脚本元素</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9-2-2-JSP-%E6%8C%87%E4%BB%A4%E5%85%83%E7%B4%A0"><span class="toc-text">9.2.2 JSP 指令元素</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9-2-3-JSP-%E5%8A%A8%E4%BD%9C%E5%85%83%E7%B4%A0"><span class="toc-text">9.2.3 JSP 动作元素</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-3-JSP-%E5%86%85%E7%BD%AE%E5%AF%B9%E8%B1%A1"><span class="toc-text">9.3 JSP 内置对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-4-JSP-%E6%B3%A8%E9%87%8A"><span class="toc-text">9.4 JSP 注释</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-5-JSTL-%E6%A0%87%E7%AD%BE%E5%BA%93"><span class="toc-text">9.5 JSTL 标签库</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#9-5-1-JSTL-%E6%A0%87%E7%AD%BE%E5%88%86%E7%B1%BB"><span class="toc-text">9.5.1 JSTL 标签分类</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9-5-2-JSTL-%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4"><span class="toc-text">9.5.2  JSTL 使用步骤</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-6-EL-%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-text">9.6 EL 表达式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-7-%E9%85%8D%E7%BD%AE-error-page"><span class="toc-text">9.7 配置 error-page</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-JavaBean"><span class="toc-text">10. JavaBean</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-MVC"><span class="toc-text">11. MVC</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-Filter"><span class="toc-text">12. Filter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-Listener"><span class="toc-text">13. Listener</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-JUnit-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E4%BD%BF%E7%94%A8"><span class="toc-text">14. JUnit 单元测试使用</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/d4070580/" title="17、JavaWeb"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.png'" alt="17、JavaWeb"/></a><div class="content"><a class="title" href="/posts/d4070580/" title="17、JavaWeb">17、JavaWeb</a><time datetime="2024-10-15T14:05:00.000Z" title="更新于 2024-10-15 22:05:00">2024-10-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/6d51b58c/" title="16、MySQL"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.png'" alt="16、MySQL"/></a><div class="content"><a class="title" href="/posts/6d51b58c/" title="16、MySQL">16、MySQL</a><time datetime="2024-10-04T05:20:45.000Z" title="更新于 2024-10-04 13:20:45">2024-10-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/72bf0210/" title="Tomcat 与 JDK 版本的对应关系"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.png'" alt="Tomcat 与 JDK 版本的对应关系"/></a><div class="content"><a class="title" href="/posts/72bf0210/" title="Tomcat 与 JDK 版本的对应关系">Tomcat 与 JDK 版本的对应关系</a><time datetime="2024-09-16T14:17:16.000Z" title="更新于 2024-09-16 22:17:16">2024-09-16</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2023 - 2026 <i id="heartbeat" class="fa fas fa-heartbeat"></i> 红油曲奇</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div><link rel="stylesheet" href="https://fastly.jsdelivr.net/gh/HCLonely/images@master/others/heartbeat.min.css"></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="chat-btn" type="button" title="聊天"><i class="fas fa-sms"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.9.0"></script><script src="/js/main.js?v=4.9.0"></script><script src="/js/tw_cn.js?v=4.9.0"></script><script src="https://unpkg.com/@fancyapps/ui@5.0.19/dist/fancybox/fancybox.umd.js"></script><script src="https://unpkg.com/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://unpkg.com/vanilla-lazyload@17.8.3/dist/lazyload.iife.min.js"></script><script src="https://unpkg.com/node-snackbar@0.1.16/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://unpkg.com/pangu@4.0.7/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"><link rel="stylesheet" type="text/css" href="https://unpkg.com/katex@0.16.7/dist/katex.min.css"><script src="https://unpkg.com/katex@0.16.7/dist/contrib/copy-tex.min.js"></script><script>(() => {
  document.querySelectorAll('#article-container span.katex-display').forEach(item => {
    btf.wrap(item, 'div', { class: 'katex-wrap'})
  })
})()</script><script>(() => {
  const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaid.length === 0) return
  const runMermaid = () => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    Array.from($mermaid).forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
      const mermaidID = 'mermaid-' + index
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)

      const renderV10 = () => {
        renderFn.then(({svg}) => {
          mermaidSrc.insertAdjacentHTML('afterend', svg)
        })
      }

      const renderV9 = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      typeof renderFn === 'string' ? renderV9(renderFn) : renderV10()
    })
  }

  const loadMermaid = () => {
    window.loadMermaid ? runMermaid() : getScript('https://unpkg.com/mermaid@10.2.2/dist/mermaid.min.js').then(runMermaid)
  }

  btf.addModeChange('mermaid', runMermaid)

  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><script>(() => {
  function abcjsInit() {
    function abcjsFn() {
      for (let abcContainer of document.getElementsByClassName("abc-music-sheet")) {
        ABCJS.renderAbc(abcContainer, abcContainer.innerHTML, {responsive: 'resize'})
      }
    }
    
    typeof ABCJS === 'object' ? abcjsFn()
      : getScript('https://unpkg.com/abcjs@6.2.2/dist/abcjs-basic-min.js').then(abcjsFn)
  }

  window.pjax ? abcjsInit() : document.addEventListener('DOMContentLoaded', abcjsInit)
})()</script><script>(()=>{
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://twikoo.vercel.afelixliu.site/',
      region: '',
      onCommentLoaded: function () {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo.vercel.afelixliu.site/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      countELement.textContent = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const runFn = () => {
    init()
    GLOBAL_CONFIG_SITE.isPost && getCount()
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') {
      setTimeout(runFn,0)
      return
    } 
    getScript('https://unpkg.com/twikoo@1.6.16/dist/twikoo.all.min.js').then(runFn)
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script><script>function getGiscusTheme (theme) {
  return theme === 'dark' ? 'dark' : 'light'
}

function loadGiscus () {
  const config = Object.assign({
    src: 'https://giscus.app/client.js',
    'data-repo': 'AFelixLiu/Blog_Giscus',
    'data-repo-id': 'R_kgDOJuFraQ',
    'data-category-id': 'DIC_kwDOJuFrac4CXIdC',
    'data-mapping': 'pathname',
    'data-theme': getGiscusTheme(document.documentElement.getAttribute('data-theme')),
    'data-reactions-enabled': '1',
    crossorigin: 'anonymous',
    async: true
  },{"data-category":"Announcements","data-mapping":"pathname","data-strict":0,"data-reactions-enabled":1,"data-emit-metadata":1,"data-input-position":"top","data-lang":"zh-CN"})

  let ele = document.createElement('script')
  for (let key in config) {
    ele.setAttribute(key, config[key])
  }
  document.getElementById('giscus-wrap').insertAdjacentElement('afterbegin',ele)
}

function changeGiscusTheme (theme) {
  function sendMessage(message) {
    const iframe = document.querySelector('iframe.giscus-frame')
    if (!iframe) return
    iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app')
  }

  sendMessage({
    setConfig: {
      theme: getGiscusTheme(theme)
    }
  });
}

btf.addModeChange('giscus', changeGiscusTheme)

if ('Twikoo' === 'Giscus' || !false) {
  if (false) btf.loadComment(document.getElementById('giscus-wrap'), loadGiscus)
  else loadGiscus()
} else {
  function loadOtherComment () {
    loadGiscus()
  }
}</script></div><script src="/js/seniverse.js"></script><script id="canvas_nest" defer="defer" color="0,23,127" opacity="1" zIndex="-1" count="100" mobile="true" src="https://unpkg.com/butterfly-extsrc@1.1.3/dist/canvas-nest.min.js"></script><script src="https://unpkg.com/butterfly-extsrc@1.1.3/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = true;
document.body.addEventListener('input', POWERMODE);
</script><script>(() => {
  window.$crisp = [];
  window.CRISP_WEBSITE_ID = "6ad448f8-30ff-4215-9667-29ccdc99e37c";
  (function () {
    d = document;
    s = d.createElement("script");
    s.src = "https://client.crisp.chat/l.js";
    s.async = 1;
    d.getElementsByTagName("head")[0].appendChild(s);
  })();
  $crisp.push(["safe", true])

  const isChatBtn = true
  const isChatHideShow = true

  if (isChatBtn) {
    const open = () => {
      $crisp.push(["do", "chat:show"])
      $crisp.push(["do", "chat:open"])
    }

    const close = () => {
      $crisp.push(["do", "chat:hide"])
    }

    close()
    $crisp.push(["on", "chat:closed", function() {
      close()
    }])

    window.chatBtnFn = () => {
      $crisp.is("chat:visible") ? close() : open()
    }
  } else if (isChatHideShow) {
    window.chatBtn = {
      hide: () => {
        $crisp.push(["do", "chat:hide"])
      },
      show: () => {
        $crisp.push(["do", "chat:show"])
      }
    }
  }
})()</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=4.9.0"></script></div></div></body></html>